(()=>{"use strict";var e={2677:(e,t,r)=>{var o=r(1396),n=r(6665),a=r(5675),s=r(981),l=r(8659),i=r(1470),d=r(8833),c=r(9039),u=r(4108),g=r(5227),h=r(5259);async function y(){try{return await h.default.getItem("novafit_session_id")}catch{return null}}function x(){let e={NODE_ENV:"production",PUBLIC_URL:"",APP_MANIFEST:{name:"NovaFit",slug:"novafit",version:"1.0.0",orientation:"portrait",icon:"./assets/images/icon.png",scheme:"novafit",userInterfaceStyle:"automatic",newArchEnabled:!0,web:{},experiments:{reactCompiler:!0},sdkVersion:"54.0.0",platforms:["ios","android","web"],androidStatusBar:{backgroundColor:"#1a1a2e"}},EXPO_DEBUG:!1,PLATFORM:"web",WDS_SOCKET_PATH:"/_expo/ws"}.EXPO_PUBLIC_DOMAIN;if(!e)throw new Error("EXPO_PUBLIC_DOMAIN is not set");return new URL(`https://${e}`).href}async function m(e){if(!e.ok){const t=await e.text()||e.statusText;throw new Error(`${e.status}: ${t}`)}}async function p(e,t,r){const o=x(),n=new URL(t,o),a=await y(),s={};r&&(s["Content-Type"]="application/json"),a&&(s.Authorization=`Bearer ${a}`);const l=await fetch(n,{method:e,headers:s,body:r?JSON.stringify(r):void 0,credentials:"include"});return await m(l),l}const f=new g.QueryClient({defaultOptions:{queries:{queryFn:(({on401:e})=>async({queryKey:t})=>{const r=x(),o=new URL(t.join("/"),r),n=await y(),a={};n&&(a.Authorization=`Bearer ${n}`);const s=await fetch(o,{headers:a,credentials:"include"});return"returnNull"===e&&401===s.status?null:(await m(s),await s.json())})({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}});var b=r(530),j=r(3929),w=r(4420),S=r(5460),C=r(4459),k=r(7869),v=r(2772),T=r(2695),I=r(8587),F=r(6283);const D="#7B68EE",B="#5D4DB3",R="#9D8FFF",_="#F0A8D0",P={light:{text:"#2D2D3A",textSecondary:"#5A5A6E",buttonText:"#FFFFFF",tabIconDefault:"#9E9EAE",tabIconSelected:D,link:D,primary:D,primaryDark:B,primaryLight:R,accent:_,backgroundRoot:"#F8F8FC",backgroundDefault:"#F0F0F8",backgroundSecondary:"#E8E8F2",backgroundTertiary:"#E0E0EC",border:"#D8D8E6",success:"#6BBF8A",warning:"#F4C56A",error:"#E07A7A",info:"#6BAADD",protein:"#6BBF8A",carbs:"#F4A5B8",fats:"#6BAADD",calories:D,workoutStrength:"#E07A5F",workoutCardio:"#6BAADD",workoutCore:"#F4C56A",workoutFlexibility:"#9B7BB8",workoutCustom:"#5B9A7A"},dark:{text:"#E8E8F0",textSecondary:"#A0A0B8",buttonText:"#FFFFFF",tabIconDefault:"#6B6B80",tabIconSelected:R,link:R,primary:D,primaryDark:B,primaryLight:R,accent:_,backgroundRoot:"#0D0D14",backgroundDefault:"#14141E",backgroundSecondary:"#1E1E2A",backgroundTertiary:"#282836",border:"#363648",success:"#6BBF8A",warning:"#F4C56A",error:"#E07A7A",info:"#6BAADD",protein:"#6BBF8A",carbs:"#F4A5B8",fats:"#6BAADD",calories:R,workoutStrength:"#E07A5F",workoutCardio:"#6BAADD",workoutCore:"#F4C56A",workoutFlexibility:"#9B7BB8",workoutCustom:"#5B9A7A"}},A=4,z=8,W=12,M=16,L=24,O=32,H=40,N=48,E=56,V=48,$=48,U=60,G=4,X=8,Y=12,J=16,q=20,Q=24,K=9999,Z={fontSize:32,fontWeight:"600",letterSpacing:-.4},ee={fontSize:24,fontWeight:"600"},te={fontSize:20,fontWeight:"600"},re={fontSize:18,fontWeight:"500"},oe={fontSize:17,fontWeight:"400",lineHeight:24},ne={fontSize:15,fontWeight:"400"},ae={fontSize:13,fontWeight:"500",textTransform:"uppercase",letterSpacing:.5},se={fontSize:17,fontWeight:"400"},le={card:{shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.06,shadowRadius:8,elevation:2},fab:{shadowColor:"#000",shadowOffset:{width:0,height:4},shadowOpacity:.12,shadowRadius:8,elevation:4}};var ie=r(673);function de(){const e=function(){const[e,t]=(0,n.useState)(!1);(0,n.useEffect)(()=>{t(!0)},[]);const r=(0,ie.default)();return e?r:"light"}();return{theme:P[e??"light"],isDark:"dark"===e}}var ce=r(397);const ue=["style","lightColor","darkColor","type"];function ge(e){let{style:t,lightColor:r,darkColor:o,type:n="body"}=e,a=(0,I.default)(e,ue);const{theme:s,isDark:l}=de();return(0,ce.jsx)(F.default,Object.assign({style:[{color:l&&o?o:!l&&r?r:"link"===n?s.link:s.text},(()=>{switch(n){case"h1":return Z;case"h2":return ee;case"h3":return te;case"h4":return re;case"body":default:return oe;case"small":return ne;case"link":return se}})(),t]},a))}var he=r(5708),ye=r(1875);const xe={damping:15,mass:.3,stiffness:150,overshootClamping:!0,energyThreshold:.001},me=ye.default.createAnimatedComponent(he.default),pe={code:"function CardTsx1(){const{scale}=this.__closure;return{transform:[{scale:scale.value}]};}"};function fe({elevation:e=1,title:t,description:r,children:o,onPress:n,style:a}){const{theme:s}=de(),l=(0,ye.useSharedValue)(1),i=((e,t)=>{switch(e){case 1:return t.backgroundDefault;case 2:return t.backgroundSecondary;case 3:return t.backgroundTertiary;default:return t.backgroundRoot}})(e,s),d=(0,ye.useAnimatedStyle)(function({_worklet_14628446680994_init_data:e,scale:t}){const r=()=>({transform:[{scale:t.value}]});return r.__closure={scale:t},r.__workletHash=0xd4df35e37a2,r.__initData=e,r}({_worklet_14628446680994_init_data:pe,scale:l}));return(0,ce.jsxs)(me,{onPress:n,onPressIn:()=>{l.value=(0,ye.withSpring)(.98,xe)},onPressOut:()=>{l.value=(0,ye.withSpring)(1,xe)},style:[be.card,{backgroundColor:i},d,a],children:[t?(0,ce.jsx)(ge,{type:"h4",style:be.cardTitle,children:t}):null,r?(0,ce.jsx)(ge,{type:"small",style:be.cardDescription,children:r}):null,o]})}const be=a.default.create({card:{padding:L,borderRadius:Q},cardTitle:{marginBottom:z},cardDescription:{opacity:.7}});function je({icon:e,label:t,value:r,subtitle:o,color:n,onPress:a}){const{theme:s}=de(),l=n||s.primary;return(0,ce.jsxs)(fe,{style:we.container,onPress:a,children:[(0,ce.jsx)(j.default,{style:[we.iconContainer,{backgroundColor:`${l}20`}],children:(0,ce.jsx)(C.default,{name:e,size:20,color:l})}),(0,ce.jsx)(ge,{type:"small",style:{color:s.textSecondary},children:t}),(0,ce.jsx)(ge,{type:"h3",children:r}),o?(0,ce.jsx)(ge,{type:"small",style:{color:s.textSecondary},children:o}):null]})}const we=a.default.create({container:{flex:1},iconContainer:{width:40,height:40,borderRadius:Y,alignItems:"center",justifyContent:"center",marginBottom:z}}),Se={code:'function ProgressBarTsx1(){const{animatedProgress}=this.__closure;return{width:animatedProgress.value*100+"%"};}'};function Ce({progress:e,color:t,backgroundColor:r,height:o=8,style:a}){const{theme:s}=de(),l=(0,ye.useSharedValue)(0);(0,n.useEffect)(()=>{l.value=(0,ye.withTiming)(Math.min(e,1),{duration:500,easing:ye.Easing.out(ye.Easing.ease)})},[e]);const i=(0,ye.useAnimatedStyle)(function({_worklet_12292197202983_init_data:e,animatedProgress:t}){const r=()=>({width:100*t.value+"%"});return r.__closure={animatedProgress:t},r.__workletHash=0xb2e000c3c27,r.__initData=e,r}({_worklet_12292197202983_init_data:Se,animatedProgress:l}));return(0,ce.jsx)(j.default,{style:[ke.container,{height:o,backgroundColor:r||s.border,borderRadius:o/2},a],children:(0,ce.jsx)(ye.default.View,{style:[ke.progress,{backgroundColor:t||s.primary,borderRadius:o/2},i]})})}const ke=a.default.create({container:{overflow:"hidden"},progress:{height:"100%"}});function ve({label:e,current:t,goal:r,color:o,unit:n="g"}){const{theme:a}=de(),s=r>0?t/r:0;return(0,ce.jsxs)(j.default,{style:Te.container,children:[(0,ce.jsx)(ge,{type:"small",style:[Te.label,{color:o}],children:e}),(0,ce.jsx)(Ce,{progress:s,color:o,height:6}),(0,ce.jsxs)(ge,{type:"small",style:[Te.value,{color:a.textSecondary}],children:[Math.round(t),"/",r,n]})]})}const Te=a.default.create({container:{flex:1,alignItems:"center"},label:{marginBottom:A,fontSize:14},value:{marginTop:A,fontSize:12}});var Ie=r(6725);const{width:Fe}=Ie.default.get("window");function De({data:e,maxValue:t,label:r,color:o}){const{theme:n}=de(),a=o||n.primary,s=t||Math.max(...e.map(e=>e.value),1);return(0,ce.jsxs)(j.default,{style:Be.container,children:[r?(0,ce.jsx)(ge,{type:"small",style:[Be.label,{color:n.textSecondary}],children:r}):null,(0,ce.jsx)(j.default,{style:Be.chart,children:e.map((e,t)=>{const r=e.value/s*80;return(0,ce.jsxs)(j.default,{style:Be.barContainer,children:[(0,ce.jsx)(j.default,{style:[Be.bar,{height:Math.max(r,4),backgroundColor:e.completed?a:n.border}]}),(0,ce.jsx)(ge,{type:"small",style:[Be.dayLabel,{color:n.textSecondary}],children:e.day})]},t)})})]})}const Be=a.default.create({container:{paddingVertical:W},label:{marginBottom:z},chart:{flexDirection:"row",justifyContent:"space-between",alignItems:"flex-end",height:100},barContainer:{flex:1,alignItems:"center",justifyContent:"flex-end"},bar:{width:24,borderRadius:X,marginBottom:A},dayLabel:{fontSize:10}}),Re={damping:15,mass:.5,stiffness:150},_e=ye.default.createAnimatedComponent(he.default),Pe={code:'function FABTsx1(){const{scale,interpolate,expanded}=this.__closure;return{transform:[{scale:scale.value},{rotate:interpolate(expanded.value,[0,1],[0,45])+"deg"}]};}'},Ae={code:'function FABTsx2(){const{expanded}=this.__closure;return{opacity:expanded.value*0.5,pointerEvents:expanded.value>0?"auto":"none"};}'},ze={code:"function FABTsx3(){const{interpolate,expanded,index}=this.__closure;const translateY=interpolate(expanded.value,[0,1],[0,-(index+1)*70]);const opacity=interpolate(expanded.value,[0,0.5,1],[0,0,1]);const actionScale=interpolate(expanded.value,[0,0.5,1],[0.5,0.8,1]);return{transform:[{translateY:translateY},{scale:actionScale}],opacity:opacity};}"};function We({actions:e}){const{theme:t}=de(),r=((0,d.useSafeAreaInsets)(),(0,S.useBottomTabBarHeight)()),[o,s]=(0,n.useState)(!1),l=(0,ye.useSharedValue)(0),i=(0,ye.useSharedValue)(1),c=()=>{l.value=o?(0,ye.withTiming)(0,{duration:200}):(0,ye.withSpring)(1,Re),s(!o)},u=(0,ye.useAnimatedStyle)(function({_worklet_7117075754723_init_data:e,scale:t,interpolate:r,expanded:o}){const n=()=>({transform:[{scale:t.value},{rotate:`${r(o.value,[0,1],[0,45])}deg`}]});return n.__closure={scale:t,interpolate:r,expanded:o},n.__workletHash=7117075754723,n.__initData=e,n}({_worklet_7117075754723_init_data:Pe,scale:i,interpolate:ye.interpolate,expanded:l})),g=(0,ye.useAnimatedStyle)(function({_worklet_4022206376280_init_data:e,expanded:t}){const r=()=>({opacity:.5*t.value,pointerEvents:t.value>0?"auto":"none"});return r.__closure={expanded:t},r.__workletHash=4022206376280,r.__initData=e,r}({_worklet_4022206376280_init_data:Ae,expanded:l}));return(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)(ye.default.View,{style:[a.default.absoluteFill,{backgroundColor:"#000"},g],children:(0,ce.jsx)(he.default,{style:a.default.absoluteFill,onPress:c})}),(0,ce.jsxs)(j.default,{style:[Me.container,{bottom:r+L,right:M}],children:[e.map((e,r)=>{const o=(0,ye.useAnimatedStyle)(function({_worklet_14126015248052_init_data:e,interpolate:t,expanded:r,index:o}){const n=function(){const e=t(r.value,[0,1],[0,70*-(o+1)]),n=t(r.value,[0,.5,1],[0,0,1]);return{transform:[{translateY:e},{scale:t(r.value,[0,.5,1],[.5,.8,1])}],opacity:n}};return n.__closure={interpolate:t,expanded:r,index:o},n.__workletHash=0xcd8f81ef6b4,n.__initData=e,n}({_worklet_14126015248052_init_data:ze,interpolate:ye.interpolate,expanded:l,index:r}));return(0,ce.jsx)(ye.default.View,{style:[Me.action,o],children:(0,ce.jsx)(he.default,{style:[Me.actionButton,{backgroundColor:t.primary}],onPress:()=>(e=>{l.value=(0,ye.withTiming)(0,{duration:200}),s(!1),e.onPress()})(e),children:(0,ce.jsxs)(j.default,{style:Me.actionContent,children:[(0,ce.jsx)(ge,{type:"small",style:[Me.actionLabel,{color:"#FFF"}],children:e.label}),(0,ce.jsx)(j.default,{style:[Me.actionIcon,{backgroundColor:t.primaryLight}],children:(0,ce.jsx)(C.default,{name:e.icon,size:20,color:"#FFF"})})]})})},e.label)}),(0,ce.jsx)(_e,{onPress:c,onPressIn:()=>{i.value=(0,ye.withSpring)(.95,Re)},onPressOut:()=>{i.value=(0,ye.withSpring)(1,Re)},style:[Me.fab,{backgroundColor:t.primary},le.fab,u],children:(0,ce.jsx)(C.default,{name:"plus",size:24,color:"#FFF"})})]})]})}const Me=a.default.create({container:{position:"absolute",alignItems:"flex-end"},fab:{width:U,height:U,borderRadius:K,alignItems:"center",justifyContent:"center"},action:{position:"absolute",bottom:0,right:0},actionButton:{borderRadius:K,overflow:"hidden"},actionContent:{flexDirection:"row",alignItems:"center",paddingLeft:M},actionLabel:{fontWeight:"600",marginRight:z},actionIcon:{width:44,height:44,borderRadius:K,alignItems:"center",justifyContent:"center"}}),Le=()=>Math.random().toString(36).substring(2,15),Oe=e=>e.reduce((e,t)=>({calories:e.calories+t.calories,protein:e.protein+t.protein,carbs:e.carbs+t.carbs,fats:e.fats+t.fats,fiber:e.fiber+t.fiber}),{calories:0,protein:0,carbs:0,fats:0,fiber:0}),He=(e,t)=>t<=0?e:{calories:e.calories/t,protein:e.protein/t,carbs:e.carbs/t,fats:e.fats/t,fiber:e.fiber/t};let Ne=[],Ee=[],Ve=[],$e=[],Ue=Object.assign({},{name:"",avatar:"earth",units:"imperial",goals:{dailyCalories:0,dailyProtein:0,dailyCarbs:0,dailyFats:0,weeklyWorkouts:0,targetWeight:0}}),Ge=[],Xe=[];const Ye=()=>{const[,e]=(0,n.useState)({}),t=(0,n.useCallback)(()=>e({}),[]);return{workouts:Ne,foods:Ee,foodEntries:Ve,workoutLogs:$e,profile:Ue,weightEntries:Ge,meals:Xe,addWorkout:e=>{const r=Object.assign({},e,{id:Le(),createdAt:new Date});return Ne=[...Ne,r],t(),r},updateWorkout:(e,r)=>{Ne=Ne.map(t=>t.id===e?Object.assign({},t,r):t),t()},deleteWorkout:e=>{Ne=Ne.filter(t=>t.id!==e),t()},addFood:e=>{const r=Object.assign({},e,{id:Le(),createdAt:new Date});return Ee=[...Ee,r],t(),r},updateFood:(e,r)=>{Ee=Ee.map(t=>t.id===e?Object.assign({},t,r):t),t()},deleteFood:e=>{Ee=Ee.filter(t=>t.id!==e),t()},addFoodEntry:e=>{const r=Object.assign({},e,{id:Le(),createdAt:new Date});return Ve=[...Ve,r],t(),r},deleteFoodEntry:e=>{Ve=Ve.filter(t=>t.id!==e),t()},addWorkoutLog:e=>{const r=Object.assign({},e,{id:Le()});return $e=[...$e,r],t(),r},updateProfile:e=>{Ue=Object.assign({},Ue,e),t()},addWeightEntry:(e,r)=>{const o=Ge.findIndex(e=>e.date===r);Ge=o>=0?Ge.map((t,r)=>r===o?Object.assign({},t,{weight:e}):t):[...Ge,{id:Le(),weight:e,date:r,createdAt:new Date}].sort((e,t)=>e.date.localeCompare(t.date)),t()},getFoodEntriesForDate:e=>Ve.filter(t=>t.date===e),getDailyNutrition:e=>Ve.filter(t=>t.date===e).reduce((e,t)=>({calories:e.calories+t.food.calories*t.servings,protein:e.protein+t.food.protein*t.servings,carbs:e.carbs+t.food.carbs*t.servings,fats:e.fats+t.food.fats*t.servings,fiber:e.fiber+t.food.fiber*t.servings}),{calories:0,protein:0,carbs:0,fats:0,fiber:0}),getWeeklyWorkouts:()=>{const e=new Date(Date.now()-6048e5);return $e.filter(t=>new Date(t.completedAt)>=e)},getWorkoutForDay:e=>Ne.find(t=>t.scheduledDays.includes(e)),addMeal:e=>{const r=Object.assign({},e,{id:Le(),createdAt:new Date});return Xe=[...Xe,r],t(),r},updateMeal:(e,r)=>{Xe=Xe.map(t=>t.id===e?Object.assign({},t,r):t),t()},deleteMeal:e=>{Xe=Xe.filter(t=>t.id!==e),t()},getMealById:e=>Xe.find(t=>t.id===e),getMealNutrition:e=>{const t=Xe.find(t=>t.id===e);return t?Oe(t.ingredients):{calories:0,protein:0,carbs:0,fats:0,fiber:0}},getMealNutritionPerServing:e=>{const t=Xe.find(t=>t.id===e);if(!t)return{calories:0,protein:0,carbs:0,fats:0,fiber:0};const r=Oe(t.ingredients);return He(r,t.totalServings)},logMealAsFood:(e,r,o,n)=>{const a=Xe.find(t=>t.id===e);if(!a)return null;const s=He(Oe(a.ingredients),a.totalServings),l={id:Le(),name:a.name,servingSize:`1 serving (of ${a.totalServings})`,calories:s.calories,protein:s.protein,carbs:s.carbs,fats:s.fats,fiber:s.fiber,isSaved:!1,createdAt:new Date},i={id:Le(),foodId:l.id,food:Object.assign({},l),mealType:o,servings:r,date:n,createdAt:new Date};return Ve=[...Ve,i],t(),i},refresh:t}},Je="novafit_session_id",qe=(0,n.createContext)({isLoading:!0,isAuthenticated:!1,user:null,goals:null,sessionId:null,login:async()=>({success:!1,error:"Not initialized"}),register:async()=>({success:!1,error:"Not initialized"}),logout:async()=>{},updateProfile:async()=>!1,updateGoals:async()=>!1,refreshUser:async()=>{}});async function Qe(e,t={},r){const o=x(),n=new URL(e,o),a=Object.assign({"Content-Type":"application/json"},t.headers||{});r&&(a.Authorization=`Bearer ${r}`);return await fetch(n.toString(),Object.assign({},t,{headers:a}))}function Ke({children:e}){const[t,r]=(0,n.useState)({isLoading:!0,isAuthenticated:!1,user:null,goals:null,sessionId:null}),o=(0,n.useCallback)(async()=>{try{const e=await h.default.getItem(Je);if(!e)return void r({isLoading:!1,isAuthenticated:!1,user:null,goals:null,sessionId:null});const t=await Qe("/api/auth/me",{method:"GET"},e);if(t.ok){const o=await t.json();r({isLoading:!1,isAuthenticated:!0,user:o.user,goals:o.goals,sessionId:e})}else await h.default.removeItem(Je),r({isLoading:!1,isAuthenticated:!1,user:null,goals:null,sessionId:null})}catch(e){console.error("Session check error:",e),r({isLoading:!1,isAuthenticated:!1,user:null,goals:null,sessionId:null})}},[]);(0,n.useEffect)(()=>{o()},[o]);const a=(0,n.useCallback)(async(e,t)=>{try{const o=await Qe("/api/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})});if(o.ok){const e=await o.json();return await h.default.setItem(Je,e.sessionId),r({isLoading:!1,isAuthenticated:!0,user:e.user,goals:e.goals,sessionId:e.sessionId}),f.invalidateQueries(),{success:!0}}return{success:!1,error:(await o.json()).error||"Login failed"}}catch(o){return console.error("Login error:",o),{success:!1,error:"Connection error. Please try again."}}},[]),s=(0,n.useCallback)(async(e,t,o)=>{try{const n=await Qe("/api/auth/register",{method:"POST",body:JSON.stringify({email:e,password:t,name:o})});if(n.ok){const e=await n.json();return await h.default.setItem(Je,e.sessionId),r({isLoading:!1,isAuthenticated:!0,user:e.user,goals:null,sessionId:e.sessionId}),{success:!0}}return{success:!1,error:(await n.json()).error||"Registration failed"}}catch(n){return console.error("Register error:",n),{success:!1,error:"Connection error. Please try again."}}},[]),l=(0,n.useCallback)(async()=>{try{t.sessionId&&await Qe("/api/auth/logout",{method:"POST"},t.sessionId)}catch(e){console.error("Logout error:",e)}finally{await h.default.removeItem(Je),f.clear(),r({isLoading:!1,isAuthenticated:!1,user:null,goals:null,sessionId:null})}},[t.sessionId]),i=(0,n.useCallback)(async e=>{try{const o=await Qe("/api/auth/profile",{method:"PATCH",body:JSON.stringify(e)},t.sessionId);if(o.ok){const e=await o.json();return r(t=>Object.assign({},t,{user:e.user})),!0}return!1}catch(o){return console.error("Update profile error:",o),!1}},[t.sessionId]),d=(0,n.useCallback)(async e=>{try{const o=await Qe("/api/auth/goals",{method:"PATCH",body:JSON.stringify(e)},t.sessionId);if(o.ok){const e=await o.json();return r(t=>Object.assign({},t,{goals:e.goals})),!0}return!1}catch(o){return console.error("Update goals error:",o),!1}},[t.sessionId]),c=(0,n.useCallback)(async()=>{await o()},[o]),u=Object.assign({},t,{login:a,register:s,logout:l,updateProfile:i,updateGoals:d,refreshUser:c});return(0,ce.jsx)(qe.Provider,{value:u,children:e})}function Ze(){return(0,n.useContext)(qe)}function et(){const e=(0,d.useSafeAreaInsets)(),t=(0,T.useHeaderHeight)(),r=(0,S.useBottomTabBarHeight)(),o=(0,s.useNavigation)(),{theme:n}=de(),a=Ye(),{user:l}=Ze(),i=(new Date).toISOString().split("T")[0],c=a.getDailyNutrition(i),u=a.getWeeklyWorkouts(),g=a.weightEntries[a.weightEntries.length-1],h=["S","M","T","W","T","F","S"].map((e,t)=>{const r=u.some(e=>new Date(e.completedAt).getDay()===t);return{day:e,value:r?1:0,completed:r}}),y=[{icon:"activity",label:"Log Workout",onPress:()=>o.navigate("WorkoutsTab",{screen:"Workouts"})},{icon:"coffee",label:"Add Food",onPress:()=>o.navigate("NutritionTab",{screen:"AddFood",params:{mealType:"snack"}})},{icon:"trending-down",label:"Log Weight",onPress:()=>o.navigate("ProfileTab",{screen:"Goals"})}];return(0,ce.jsxs)(j.default,{style:[tt.container,{backgroundColor:n.backgroundRoot}],children:[(0,ce.jsxs)(v.default,{style:tt.scroll,contentContainerStyle:{paddingTop:t+L,paddingBottom:r+E,paddingHorizontal:M},scrollIndicatorInsets:{bottom:e.bottom},children:[(0,ce.jsxs)(j.default,{style:tt.greeting,children:[(0,ce.jsxs)(ge,{type:"h2",children:[(()=>{const e=(new Date).getHours();return e<12?"Good morning":e<17?"Good afternoon":"Good evening"})(),", ",l?.name||"there"]}),(0,ce.jsx)(ge,{type:"small",style:{color:n.textSecondary},children:(new Date).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})})]}),(0,ce.jsxs)(fe,{style:tt.nutritionCard,children:[(0,ce.jsxs)(j.default,{style:tt.nutritionHeader,children:[(0,ce.jsx)(ge,{type:"h4",children:"Today's Nutrition"}),(0,ce.jsxs)(j.default,{style:tt.caloriesBadge,children:[(0,ce.jsx)(ge,{type:"h3",style:{color:n.primary},children:Math.round(c.calories)}),(0,ce.jsxs)(ge,{type:"small",style:{color:n.textSecondary},children:["/",a.profile.goals.dailyCalories," cal"]})]})]}),(0,ce.jsxs)(j.default,{style:tt.macros,children:[(0,ce.jsx)(ve,{label:"Protein",current:c.protein,goal:a.profile.goals.dailyProtein,color:n.protein}),(0,ce.jsx)(j.default,{style:tt.macroSpacer}),(0,ce.jsx)(ve,{label:"Carbs",current:c.carbs,goal:a.profile.goals.dailyCarbs,color:n.carbs}),(0,ce.jsx)(j.default,{style:tt.macroSpacer}),(0,ce.jsx)(ve,{label:"Fats",current:c.fats,goal:a.profile.goals.dailyFats,color:n.fats})]})]}),(0,ce.jsxs)(j.default,{style:tt.statsRow,children:[(0,ce.jsx)(je,{icon:"activity",label:"Weekly Workouts",value:u.length,subtitle:`of ${a.profile.goals.weeklyWorkouts} goal`,color:n.success}),(0,ce.jsx)(j.default,{style:tt.statSpacer}),(0,ce.jsx)(je,{icon:"trending-down",label:"Current Weight",value:g?`${g.weight}`:"--",subtitle:"imperial"===a.profile.units?"lbs":"kg",color:n.info})]}),(0,ce.jsxs)(fe,{style:tt.chartCard,children:[(0,ce.jsx)(ge,{type:"h4",children:"Weekly Activity"}),(0,ce.jsx)(De,{data:h,maxValue:1,color:n.success})]}),u.length>0?(0,ce.jsxs)(j.default,{style:tt.recentSection,children:[(0,ce.jsx)(ge,{type:"h4",style:tt.sectionTitle,children:"Recent Activity"}),u.slice(0,3).map(e=>(0,ce.jsx)(fe,{style:tt.activityCard,children:(0,ce.jsxs)(j.default,{style:tt.activityRow,children:[(0,ce.jsx)(j.default,{style:[tt.activityIcon,{backgroundColor:`${n.success}20`}],children:(0,ce.jsx)(C.default,{name:"check",size:16,color:n.success})}),(0,ce.jsxs)(j.default,{style:tt.activityContent,children:[(0,ce.jsx)(ge,{type:"body",children:e.workoutName}),(0,ce.jsxs)(ge,{type:"small",style:{color:n.textSecondary},children:[new Date(e.completedAt).toLocaleDateString()," - ",e.duration," min"]})]})]})},e.id))]}):null]}),(0,ce.jsx)(We,{actions:y})]})}const tt=a.default.create({container:{flex:1},scroll:{flex:1},greeting:{marginBottom:L},nutritionCard:{marginBottom:M},nutritionHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:M},caloriesBadge:{flexDirection:"row",alignItems:"baseline"},macros:{flexDirection:"row"},macroSpacer:{width:M},statsRow:{flexDirection:"row",marginBottom:M},statSpacer:{width:W},chartCard:{marginBottom:M},recentSection:{marginTop:W},sectionTitle:{marginBottom:W},activityCard:{marginBottom:z},activityRow:{flexDirection:"row",alignItems:"center"},activityIcon:{width:36,height:36,borderRadius:Y,alignItems:"center",justifyContent:"center",marginRight:W},activityContent:{flex:1}});var rt=r(484);function ot({title:e}){return(0,ce.jsxs)(j.default,{style:nt.container,children:[(0,ce.jsx)(rt.default,{source:r(3229),style:nt.icon,resizeMode:"contain"}),(0,ce.jsx)(ge,{style:nt.title,children:e})]})}const nt=a.default.create({container:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},icon:{width:36,height:36,marginRight:z},title:{fontSize:17,fontWeight:"600"}});var at=r(571);function st({transparent:e=!0}={}){const{theme:t,isDark:r}=de();return{headerTitleAlign:"center",headerTransparent:e,headerBlurEffect:r?"dark":"light",headerTintColor:t.text,headerStyle:{backgroundColor:t.backgroundRoot},gestureEnabled:!0,gestureDirection:"horizontal",fullScreenGestureEnabled:!(0,at.isLiquidGlassAvailable)(),contentStyle:{backgroundColor:t.backgroundRoot}}}const lt=(0,w.createNativeStackNavigator)();function it(){const e=st();return(0,ce.jsx)(lt.Navigator,{screenOptions:e,children:(0,ce.jsx)(lt.Screen,{name:"Home",component:et,options:{headerTitle:()=>(0,ce.jsx)(ot,{title:"NovaFit"})}})})}const dt={damping:15,mass:.3,stiffness:150},ct=ye.default.createAnimatedComponent(he.default),ut={code:"function WorkoutCardTsx1(){const{scale}=this.__closure;return{transform:[{scale:scale.value}]};}"};function gt({workout:e,onPress:t,onStart:r}){const{theme:o}=de(),n=(0,ye.useSharedValue)(1),a=(0,ye.useAnimatedStyle)(function({_worklet_13091514820013_init_data:e,scale:t}){const r=()=>({transform:[{scale:t.value}]});return r.__closure={scale:t},r.__workletHash=0xbe81b1725ad,r.__initData=e,r}({_worklet_13091514820013_init_data:ut,scale:n})),s=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],l=e.scheduledDays.map(e=>s[e]).join(", ");return(0,ce.jsxs)(ct,{onPress:t,onPressIn:()=>{n.value=(0,ye.withSpring)(.98,dt)},onPressOut:()=>{n.value=(0,ye.withSpring)(1,dt)},style:[ht.container,{backgroundColor:o.backgroundDefault},a],children:[(0,ce.jsx)(j.default,{style:[ht.colorBar,{backgroundColor:e.color}]}),(0,ce.jsxs)(j.default,{style:ht.content,children:[(0,ce.jsxs)(j.default,{style:ht.header,children:[(0,ce.jsx)(ge,{type:"h4",children:e.name}),(0,ce.jsxs)(j.default,{style:ht.exerciseCount,children:[(0,ce.jsx)(C.default,{name:"list",size:14,color:o.textSecondary}),(0,ce.jsxs)(ge,{type:"small",style:{color:o.textSecondary,marginLeft:4},children:[e.exercises.length," exercises"]})]})]}),(0,ce.jsxs)(j.default,{style:ht.footer,children:[(0,ce.jsxs)(j.default,{style:ht.schedule,children:[(0,ce.jsx)(C.default,{name:"calendar",size:14,color:o.textSecondary}),(0,ce.jsx)(ge,{type:"small",style:{color:o.textSecondary,marginLeft:4},children:l||"Not scheduled"})]}),r?(0,ce.jsxs)(he.default,{onPress:r,style:[ht.startButton,{backgroundColor:o.primary}],children:[(0,ce.jsx)(C.default,{name:"play",size:16,color:"#FFF"}),(0,ce.jsx)(ge,{type:"small",style:{color:"#FFF",marginLeft:4},children:"Start"})]}):null]})]})]})}const ht=a.default.create({container:{borderRadius:J,overflow:"hidden",flexDirection:"row"},colorBar:{width:4},content:{flex:1,padding:M},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:z},exerciseCount:{flexDirection:"row",alignItems:"center"},footer:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},schedule:{flexDirection:"row",alignItems:"center"},startButton:{flexDirection:"row",alignItems:"center",paddingVertical:A,paddingHorizontal:W,borderRadius:K}}),yt=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function xt({workouts:e,onDayPress:t,onWorkoutPress:r}){const{theme:o}=de(),n=(new Date).getDay();return(0,ce.jsx)(j.default,{style:mt.container,children:yt.map((a,s)=>{const l=(i=s,e.find(e=>e.scheduledDays.includes(i)));var i;const d=s===n;return(0,ce.jsxs)(j.default,{style:mt.dayColumn,children:[(0,ce.jsx)(j.default,{style:[mt.dayHeader,d&&{backgroundColor:o.primary}],children:(0,ce.jsx)(ge,{type:"small",style:[mt.dayText,{color:d?"#FFF":o.textSecondary}],children:a})}),(0,ce.jsx)(he.default,{onPress:()=>l?r(l):t(s),style:[mt.dayContent,{backgroundColor:o.backgroundDefault}],children:l?(0,ce.jsx)(j.default,{style:[mt.workoutIndicator,{backgroundColor:l.color}],children:(0,ce.jsx)(ge,{type:"small",style:mt.workoutName,numberOfLines:2,children:l.name})}):(0,ce.jsx)(C.default,{name:"plus",size:16,color:o.textSecondary})})]},a)})})}const mt=a.default.create({container:{flexDirection:"row",gap:A},dayColumn:{flex:1},dayHeader:{alignItems:"center",paddingVertical:A,borderRadius:X,marginBottom:A},dayText:{fontWeight:"600",fontSize:11},dayContent:{height:60,borderRadius:X,alignItems:"center",justifyContent:"center",padding:A},workoutIndicator:{width:"100%",height:"100%",borderRadius:G,alignItems:"center",justifyContent:"center",padding:2},workoutName:{color:"#FFF",fontSize:9,textAlign:"center",fontWeight:"600"}});function pt(){const e=(0,d.useSafeAreaInsets)(),t=(0,T.useHeaderHeight)(),r=(0,S.useBottomTabBarHeight)(),o=(0,s.useNavigation)(),{theme:a}=de(),l=Ye(),[i,c]=(0,n.useState)("library");return(0,ce.jsx)(j.default,{style:[ft.container,{backgroundColor:a.backgroundRoot}],children:(0,ce.jsxs)(v.default,{style:ft.scroll,contentContainerStyle:{paddingTop:t+L,paddingBottom:r+L,paddingHorizontal:M},scrollIndicatorInsets:{bottom:e.bottom},children:[(0,ce.jsxs)(j.default,{style:ft.header,children:[(0,ce.jsxs)(j.default,{style:[ft.segmentedControl,{backgroundColor:a.backgroundDefault}],children:[(0,ce.jsx)(he.default,{onPress:()=>c("library"),style:[ft.segment,"library"===i&&{backgroundColor:a.backgroundRoot}],children:(0,ce.jsx)(ge,{type:"small",style:{fontWeight:"library"===i?"600":"400",color:"library"===i?a.text:a.textSecondary},children:"Library"})}),(0,ce.jsx)(he.default,{onPress:()=>c("schedule"),style:[ft.segment,"schedule"===i&&{backgroundColor:a.backgroundRoot}],children:(0,ce.jsx)(ge,{type:"small",style:{fontWeight:"schedule"===i?"600":"400",color:"schedule"===i?a.text:a.textSecondary},children:"Schedule"})})]}),(0,ce.jsx)(he.default,{onPress:()=>o.navigate("CreateWorkout"),style:[ft.addButton,{backgroundColor:a.primary}],children:(0,ce.jsx)(C.default,{name:"plus",size:20,color:"#FFF"})})]}),"library"===i?(0,ce.jsx)(j.default,{style:ft.library,children:0===l.workouts.length?(0,ce.jsxs)(j.default,{style:ft.empty,children:[(0,ce.jsx)(C.default,{name:"activity",size:48,color:a.textSecondary}),(0,ce.jsx)(ge,{type:"body",style:{color:a.textSecondary,marginTop:W},children:"No workouts yet"}),(0,ce.jsx)(he.default,{onPress:()=>o.navigate("CreateWorkout"),style:[ft.createButton,{borderColor:a.primary}],children:(0,ce.jsx)(ge,{type:"body",style:{color:a.primary},children:"Create your first workout"})})]}):l.workouts.map(e=>(0,ce.jsx)(j.default,{style:ft.cardWrapper,children:(0,ce.jsx)(gt,{workout:e,onPress:()=>o.navigate("WorkoutDetail",{workoutId:e.id}),onStart:()=>o.navigate("ActiveWorkout",{workoutId:e.id})})},e.id))}):(0,ce.jsxs)(j.default,{style:ft.schedule,children:[(0,ce.jsx)(ge,{type:"h4",style:ft.scheduleTitle,children:"Weekly Schedule"}),(0,ce.jsx)(xt,{workouts:l.workouts,onDayPress:e=>o.navigate("CreateWorkout"),onWorkoutPress:e=>o.navigate("WorkoutDetail",{workoutId:e.id})}),(0,ce.jsx)(j.default,{style:ft.legend,children:l.workouts.map(e=>(0,ce.jsxs)(j.default,{style:ft.legendItem,children:[(0,ce.jsx)(j.default,{style:[ft.legendColor,{backgroundColor:e.color}]}),(0,ce.jsx)(ge,{type:"small",children:e.name})]},e.id))})]})]})})}const ft=a.default.create({container:{flex:1},scroll:{flex:1},header:{flexDirection:"row",alignItems:"center",marginBottom:L},segmentedControl:{flex:1,flexDirection:"row",borderRadius:Y,padding:4,marginRight:W},segment:{flex:1,paddingVertical:z,alignItems:"center",borderRadius:X},addButton:{width:40,height:40,borderRadius:Y,alignItems:"center",justifyContent:"center"},library:{},cardWrapper:{marginBottom:W},empty:{alignItems:"center",paddingVertical:N},createButton:{marginTop:M,paddingVertical:W,paddingHorizontal:L,borderWidth:1,borderRadius:K},schedule:{},scheduleTitle:{marginBottom:M},legend:{marginTop:L,flexDirection:"row",flexWrap:"wrap",gap:W},legendItem:{flexDirection:"row",alignItems:"center"},legendColor:{width:12,height:12,borderRadius:6,marginRight:A}});var bt=r(6773);const jt=["children","keyboardShouldPersistTaps"];function wt(e){let{children:t,keyboardShouldPersistTaps:r="handled"}=e,o=(0,I.default)(e,jt);return(0,ce.jsx)(v.default,Object.assign({keyboardShouldPersistTaps:r},o,{children:t}))}const St={damping:15,mass:.3,stiffness:150,overshootClamping:!0,energyThreshold:.001},Ct=ye.default.createAnimatedComponent(he.default),kt={code:"function ButtonTsx1(){const{scale}=this.__closure;return{transform:[{scale:scale.value}]};}"};function vt({onPress:e,children:t,style:r,disabled:o=!1}){const{theme:n}=de(),a=(0,ye.useSharedValue)(1),s=(0,ye.useAnimatedStyle)(function({_worklet_4130383383776_init_data:e,scale:t}){const r=()=>({transform:[{scale:t.value}]});return r.__closure={scale:t},r.__workletHash=4130383383776,r.__initData=e,r}({_worklet_4130383383776_init_data:kt,scale:a}));return(0,ce.jsx)(Ct,{onPress:o?void 0:e,onPressIn:()=>{o||(a.value=(0,ye.withSpring)(.98,St))},onPressOut:()=>{o||(a.value=(0,ye.withSpring)(1,St))},disabled:o,style:[Tt.button,{backgroundColor:n.link,opacity:o?.5:1},r,s],children:(0,ce.jsx)(ge,{type:"body",style:[Tt.buttonText,{color:n.buttonText}],children:t})})}const Tt=a.default.create({button:{height:$,borderRadius:K,alignItems:"center",justifyContent:"center"},buttonText:{fontWeight:"600"}}),It=["#FF6B35","#4ECDC4","#FFE66D","#FF6B6B","#4CAF50","#2196F3"],Ft=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function Dt(){const e=(0,d.useSafeAreaInsets)(),t=(0,T.useHeaderHeight)(),r=(0,s.useNavigation)(),o=(0,s.useRoute)(),{theme:a}=de(),l=Ye(),i=o.params?.workoutId?l.workouts.find(e=>e.id===o.params?.workoutId):null,[c,u]=(0,n.useState)(i?.name||""),[g,h]=(0,n.useState)(i?.color||It[0]),[y,x]=(0,n.useState)(i?.scheduledDays||[]),[m,p]=(0,n.useState)(i?.exercises.map(e=>({name:e.name,sets:e.sets,reps:e.reps,weight:e.weight,isBodyweight:e.isBodyweight||!1,notes:e.notes}))||[]),f=()=>{p([...m,{name:"",sets:3,reps:10,weight:0,isBodyweight:!1}])},b=(e,t)=>{p(r=>r.map((r,o)=>o===e?Object.assign({},r,t):r))};return(0,ce.jsxs)(wt,{style:{flex:1,backgroundColor:a.backgroundRoot},contentContainerStyle:{paddingTop:t+L,paddingBottom:e.bottom+L,paddingHorizontal:M},children:[(0,ce.jsxs)(j.default,{style:Bt.field,children:[(0,ce.jsx)(ge,{type:"small",style:[Bt.label,{color:a.textSecondary}],children:"Workout Name"}),(0,ce.jsx)(bt.default,{value:c,onChangeText:u,placeholder:"e.g., Upper Body",placeholderTextColor:a.textSecondary,style:[Bt.input,{backgroundColor:a.backgroundDefault,color:a.text,borderColor:a.border}]})]}),(0,ce.jsxs)(j.default,{style:Bt.field,children:[(0,ce.jsx)(ge,{type:"small",style:[Bt.label,{color:a.textSecondary}],children:"Color"}),(0,ce.jsx)(j.default,{style:Bt.colorRow,children:It.map(e=>(0,ce.jsx)(he.default,{onPress:()=>h(e),style:[Bt.colorOption,{backgroundColor:e},g===e&&Bt.colorSelected],children:g===e?(0,ce.jsx)(C.default,{name:"check",size:16,color:"#FFF"}):null},e))})]}),(0,ce.jsxs)(j.default,{style:Bt.field,children:[(0,ce.jsx)(ge,{type:"small",style:[Bt.label,{color:a.textSecondary}],children:"Schedule"}),(0,ce.jsx)(j.default,{style:Bt.daysRow,children:Ft.map((e,t)=>(0,ce.jsx)(he.default,{onPress:()=>(e=>{x(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])})(t),style:[Bt.dayButton,{backgroundColor:y.includes(t)?a.primary:a.backgroundDefault}],children:(0,ce.jsx)(ge,{type:"small",style:{color:y.includes(t)?"#FFF":a.text,fontWeight:"600"},children:e.slice(0,1)})},e))})]}),(0,ce.jsxs)(j.default,{style:Bt.field,children:[(0,ce.jsxs)(j.default,{style:Bt.exercisesHeader,children:[(0,ce.jsx)(ge,{type:"h4",children:"Exercises"}),(0,ce.jsxs)(he.default,{onPress:f,style:Bt.addExerciseButton,children:[(0,ce.jsx)(C.default,{name:"plus",size:18,color:a.primary}),(0,ce.jsx)(ge,{type:"small",style:{color:a.primary,marginLeft:4},children:"Add"})]})]}),m.map((e,t)=>(0,ce.jsxs)(fe,{style:Bt.exerciseCard,children:[(0,ce.jsxs)(j.default,{style:Bt.exerciseHeader,children:[(0,ce.jsx)(bt.default,{value:e.name,onChangeText:e=>b(t,{name:e}),placeholder:"Exercise name",placeholderTextColor:a.textSecondary,style:[Bt.exerciseNameInput,{color:a.text}]}),(0,ce.jsx)(he.default,{onPress:()=>(e=>{p(t=>t.filter((t,r)=>r!==e))})(t),style:Bt.removeButton,children:(0,ce.jsx)(C.default,{name:"x",size:18,color:a.error})})]}),(0,ce.jsxs)(he.default,{onPress:()=>b(t,{isBodyweight:!e.isBodyweight,weight:0}),style:Bt.bodyweightRow,children:[(0,ce.jsx)(j.default,{style:[Bt.bodyweightToggle,{backgroundColor:e.isBodyweight?a.primary:a.backgroundDefault,borderColor:e.isBodyweight?a.primary:a.border}],children:e.isBodyweight?(0,ce.jsx)(C.default,{name:"check",size:12,color:"#FFF"}):null}),(0,ce.jsx)(ge,{type:"small",style:{color:a.textSecondary},children:"Bodyweight exercise (no weights)"})]}),(0,ce.jsxs)(j.default,{style:Bt.exerciseDetails,children:[(0,ce.jsxs)(j.default,{style:Bt.detailField,children:[(0,ce.jsx)(ge,{type:"small",style:{color:a.textSecondary},children:"Sets"}),(0,ce.jsx)(bt.default,{value:String(e.sets),onChangeText:e=>b(t,{sets:parseInt(e)||0}),keyboardType:"number-pad",style:[Bt.detailInput,{backgroundColor:a.backgroundDefault,color:a.text}]})]}),(0,ce.jsxs)(j.default,{style:Bt.detailField,children:[(0,ce.jsx)(ge,{type:"small",style:{color:a.textSecondary},children:"Reps"}),(0,ce.jsx)(bt.default,{value:String(e.reps),onChangeText:e=>b(t,{reps:parseInt(e)||0}),keyboardType:"number-pad",style:[Bt.detailInput,{backgroundColor:a.backgroundDefault,color:a.text}]})]}),e.isBodyweight?null:(0,ce.jsxs)(j.default,{style:Bt.detailField,children:[(0,ce.jsx)(ge,{type:"small",style:{color:a.textSecondary},children:"Weight"}),(0,ce.jsx)(bt.default,{value:String(e.weight),onChangeText:e=>b(t,{weight:parseFloat(e)||0}),keyboardType:"decimal-pad",style:[Bt.detailInput,{backgroundColor:a.backgroundDefault,color:a.text}]})]})]})]},t)),0===m.length?(0,ce.jsxs)(he.default,{onPress:f,style:[Bt.emptyExercises,{borderColor:a.border}],children:[(0,ce.jsx)(C.default,{name:"plus",size:24,color:a.textSecondary}),(0,ce.jsx)(ge,{type:"body",style:{color:a.textSecondary,marginTop:z},children:"Add your first exercise"})]}):null]}),(0,ce.jsx)(vt,{onPress:()=>{if(!c.trim())return;const e={name:c.trim(),color:g,scheduledDays:y,exercises:m.filter(e=>e.name.trim()).map((e,t)=>Object.assign({},e,{id:String(t)}))};i?l.updateWorkout(i.id,e):l.addWorkout(e),r.goBack()},disabled:!c.trim(),children:i?"Update Workout":"Create Workout"})]})}const Bt=a.default.create({field:{marginBottom:L},label:{marginBottom:z},input:{height:V,borderWidth:1,borderRadius:Y,paddingHorizontal:M,fontSize:16},colorRow:{flexDirection:"row",gap:W},colorOption:{width:40,height:40,borderRadius:20,alignItems:"center",justifyContent:"center"},colorSelected:{borderWidth:3,borderColor:"#FFF"},daysRow:{flexDirection:"row",gap:z},dayButton:{width:40,height:40,borderRadius:20,alignItems:"center",justifyContent:"center"},exercisesHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:W},addExerciseButton:{flexDirection:"row",alignItems:"center"},exerciseCard:{marginBottom:W},exerciseHeader:{flexDirection:"row",alignItems:"center",marginBottom:W},exerciseNameInput:{flex:1,fontSize:16,fontWeight:"600"},removeButton:{padding:A},exerciseDetails:{flexDirection:"row",gap:W},detailField:{flex:1},detailInput:{height:40,borderRadius:X,textAlign:"center",marginTop:A,fontSize:16},emptyExercises:{alignItems:"center",paddingVertical:H,borderWidth:1,borderStyle:"dashed",borderRadius:Y},bodyweightRow:{flexDirection:"row",alignItems:"center",marginBottom:W,marginTop:A},bodyweightToggle:{width:20,height:20,borderRadius:G,borderWidth:2,alignItems:"center",justifyContent:"center",marginRight:z}});var Rt=r(1690);const _t=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function Pt(){const e=(0,d.useSafeAreaInsets)(),t=(0,T.useHeaderHeight)(),r=(0,S.useBottomTabBarHeight)(),o=(0,s.useNavigation)(),n=(0,s.useRoute)(),{theme:a}=de(),l=Ye(),i=l.workouts.find(e=>e.id===n.params.workoutId);if(!i)return(0,ce.jsx)(j.default,{style:[At.container,{backgroundColor:a.backgroundRoot,justifyContent:"center"}],children:(0,ce.jsx)(ge,{type:"body",style:{textAlign:"center"},children:"Workout not found"})});return(0,ce.jsxs)(j.default,{style:[At.container,{backgroundColor:a.backgroundRoot}],children:[(0,ce.jsxs)(v.default,{style:At.scroll,contentContainerStyle:{paddingTop:t+L,paddingBottom:r+H,paddingHorizontal:M},scrollIndicatorInsets:{bottom:e.bottom},children:[(0,ce.jsxs)(j.default,{style:At.header,children:[(0,ce.jsx)(j.default,{style:[At.colorBadge,{backgroundColor:i.color}]}),(0,ce.jsxs)(j.default,{style:At.headerContent,children:[(0,ce.jsx)(ge,{type:"h2",children:i.name}),(0,ce.jsxs)(j.default,{style:At.schedule,children:[(0,ce.jsx)(C.default,{name:"calendar",size:14,color:a.textSecondary}),(0,ce.jsx)(ge,{type:"small",style:{color:a.textSecondary,marginLeft:4},children:i.scheduledDays.length>0?i.scheduledDays.map(e=>_t[e]).join(", "):"Not scheduled"})]})]}),(0,ce.jsxs)(j.default,{style:At.headerActions,children:[(0,ce.jsx)(he.default,{onPress:()=>o.navigate("CreateWorkout",{workoutId:i.id}),style:[At.iconButton,{backgroundColor:a.backgroundDefault}],children:(0,ce.jsx)(C.default,{name:"edit-2",size:18,color:a.text})}),(0,ce.jsx)(he.default,{onPress:()=>{Rt.default.alert("Delete Workout",`Are you sure you want to delete "${i.name}"?`,[{text:"Cancel",style:"cancel"},{text:"Delete",style:"destructive",onPress:()=>{l.deleteWorkout(i.id),o.goBack()}}])},style:[At.iconButton,{backgroundColor:a.backgroundDefault}],children:(0,ce.jsx)(C.default,{name:"trash-2",size:18,color:a.error})})]})]}),(0,ce.jsxs)(ge,{type:"h4",style:At.sectionTitle,children:["Exercises (",i.exercises.length,")"]}),i.exercises.map((e,t)=>(0,ce.jsxs)(fe,{style:At.exerciseCard,children:[(0,ce.jsxs)(j.default,{style:At.exerciseHeader,children:[(0,ce.jsx)(j.default,{style:At.exerciseIndex,children:(0,ce.jsx)(ge,{type:"small",style:{color:"#FFF",fontWeight:"600"},children:t+1})}),(0,ce.jsx)(ge,{type:"body",style:{fontWeight:"600"},children:e.name})]}),(0,ce.jsxs)(j.default,{style:At.exerciseStats,children:[(0,ce.jsxs)(j.default,{style:At.stat,children:[(0,ce.jsx)(ge,{type:"h4",children:e.sets}),(0,ce.jsx)(ge,{type:"small",style:{color:a.textSecondary},children:"sets"})]}),(0,ce.jsx)(j.default,{style:At.statDivider}),(0,ce.jsxs)(j.default,{style:At.stat,children:[(0,ce.jsx)(ge,{type:"h4",children:e.reps}),(0,ce.jsx)(ge,{type:"small",style:{color:a.textSecondary},children:"reps"})]}),(0,ce.jsx)(j.default,{style:At.statDivider}),(0,ce.jsxs)(j.default,{style:At.stat,children:[(0,ce.jsx)(ge,{type:"h4",children:e.weight}),(0,ce.jsx)(ge,{type:"small",style:{color:a.textSecondary},children:"lbs"})]})]}),e.notes?(0,ce.jsx)(ge,{type:"small",style:[At.notes,{color:a.textSecondary}],children:e.notes}):null]},e.id))]}),(0,ce.jsx)(j.default,{style:[At.footer,{backgroundColor:a.backgroundRoot,paddingBottom:e.bottom+M}],children:(0,ce.jsx)(vt,{onPress:()=>o.navigate("ActiveWorkout",{workoutId:i.id}),children:"Start Workout"})})]})}const At=a.default.create({container:{flex:1},scroll:{flex:1},header:{flexDirection:"row",alignItems:"flex-start",marginBottom:L},colorBadge:{width:4,height:50,borderRadius:2,marginRight:W},headerContent:{flex:1},schedule:{flexDirection:"row",alignItems:"center",marginTop:A},headerActions:{flexDirection:"row",gap:z},iconButton:{width:40,height:40,borderRadius:Y,alignItems:"center",justifyContent:"center"},sectionTitle:{marginBottom:W},exerciseCard:{marginBottom:W},exerciseHeader:{flexDirection:"row",alignItems:"center",marginBottom:W},exerciseIndex:{width:24,height:24,borderRadius:12,backgroundColor:"#FF6B35",alignItems:"center",justifyContent:"center",marginRight:W},exerciseStats:{flexDirection:"row",alignItems:"center"},stat:{flex:1,alignItems:"center"},statDivider:{width:1,height:30,backgroundColor:"#E0E0E0"},notes:{marginTop:W,fontStyle:"italic"},footer:{paddingHorizontal:M,paddingTop:M,borderTopWidth:1,borderTopColor:"#E0E0E0"}});var zt=r(4866),Wt=r(3185);const Mt=["style","lightColor","darkColor"];function Lt(e){let{style:t,lightColor:r,darkColor:o}=e,n=(0,I.default)(e,Mt);const{theme:a,isDark:s}=de(),l=s&&o?o:!s&&r?r:a.backgroundRoot;return(0,ce.jsx)(j.default,Object.assign({style:[{backgroundColor:l},t]},n))}function Ot(){const e=(0,d.useSafeAreaInsets)(),t=(0,s.useNavigation)(),r=(0,s.useRoute)(),{theme:o}=de(),a=Ye(),l=a.workouts.find(e=>e.id===r.params.workoutId),[i,c]=(0,n.useState)(0),[u,g]=(0,n.useState)(!1),[h,y]=(0,n.useState)({}),x=(0,n.useRef)(null);if((0,n.useEffect)(()=>{if(!l)return;const e={};return l.exercises.forEach(t=>{e[t.id]=Array.from({length:t.sets},()=>({reps:t.reps,weight:t.isBodyweight?0:t.weight,completed:!1}))}),y(e),x.current=setInterval(()=>{u||c(e=>e+1)},1e3),()=>{x.current&&clearInterval(x.current)}},[l?.id]),(0,n.useEffect)(()=>(x.current&&clearInterval(x.current),u||(x.current=setInterval(()=>{c(e=>e+1)},1e3)),()=>{x.current&&clearInterval(x.current)}),[u]),!l)return(0,ce.jsx)(Lt,{style:[Ht.container,{paddingTop:e.top}],children:(0,ce.jsx)(ge,{children:"Workout not found"})});const m=(e,t,r,o)=>{y(n=>Object.assign({},n,{[e]:n[e].map((e,n)=>n===t?Object.assign({},e,{[r]:o}):e)}))},p=()=>Object.values(h).reduce((e,t)=>e+t.filter(e=>e.completed).length,0),f=()=>l.exercises.reduce((e,t)=>e+t.sets,0);return(0,ce.jsxs)(j.default,{style:[Ht.container,{backgroundColor:o.backgroundRoot}],children:[(0,ce.jsxs)(j.default,{style:[Ht.header,{backgroundColor:o.primary,paddingTop:e.top+W}],children:[(0,ce.jsxs)(j.default,{style:Ht.headerTop,children:[(0,ce.jsx)(he.default,{onPress:()=>t.goBack(),style:Ht.closeButton,children:(0,ce.jsx)(C.default,{name:"x",size:24,color:"#FFF"})}),(0,ce.jsxs)(j.default,{style:Ht.timer,children:[(0,ce.jsx)(C.default,{name:"clock",size:18,color:"#FFF"}),(0,ce.jsx)(ge,{type:"h3",style:Ht.timerText,children:(e=>{const t=e%60;return`${Math.floor(e/60).toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`})(i)})]}),(0,ce.jsx)(he.default,{onPress:()=>g(!u),style:Ht.pauseButton,children:(0,ce.jsx)(C.default,{name:u?"play":"pause",size:24,color:"#FFF"})})]}),(0,ce.jsx)(ge,{type:"h2",style:Ht.workoutName,children:l.name}),(0,ce.jsxs)(j.default,{style:Ht.progress,children:[(0,ce.jsx)(j.default,{style:Ht.progressBar,children:(0,ce.jsx)(j.default,{style:[Ht.progressFill,{width:p()/f()*100+"%"}]})}),(0,ce.jsxs)(ge,{type:"small",style:Ht.progressText,children:[p(),"/",f()," sets"]})]})]}),(0,ce.jsx)(v.default,{style:Ht.scroll,contentContainerStyle:{padding:M,paddingBottom:e.bottom+140},children:l.exercises.map(e=>(0,ce.jsxs)(fe,{style:Ht.exerciseCard,children:[(0,ce.jsx)(ge,{type:"h4",style:Ht.exerciseName,children:e.name}),(0,ce.jsxs)(j.default,{style:Ht.setsHeader,children:[(0,ce.jsx)(ge,{type:"small",style:[Ht.setHeaderText,{width:40}],children:"Set"}),(0,ce.jsx)(ge,{type:"small",style:[Ht.setHeaderText,{flex:1}],children:"Reps"}),e.isBodyweight?null:(0,ce.jsx)(ge,{type:"small",style:[Ht.setHeaderText,{flex:1}],children:"Weight"}),(0,ce.jsx)(j.default,{style:{width:44}})]}),h[e.id]?.map((t,r)=>(0,ce.jsxs)(j.default,{style:[Ht.setRow,t.completed&&{backgroundColor:`${o.success}10`}],children:[(0,ce.jsx)(j.default,{style:Ht.setNumber,children:(0,ce.jsx)(ge,{type:"body",style:{fontWeight:"600"},children:r+1})}),(0,ce.jsx)(bt.default,{value:String(t.reps),onChangeText:t=>m(e.id,r,"reps",parseInt(t)||0),keyboardType:"number-pad",style:[Ht.setInput,{backgroundColor:o.backgroundDefault,color:o.text}]}),e.isBodyweight?null:(0,ce.jsx)(bt.default,{value:String(t.weight),onChangeText:t=>m(e.id,r,"weight",parseFloat(t)||0),keyboardType:"decimal-pad",style:[Ht.setInput,{backgroundColor:o.backgroundDefault,color:o.text}]}),(0,ce.jsx)(he.default,{onPress:()=>{return t=e.id,o=r,zt.impactAsync(Wt.ImpactFeedbackStyle.Light),void y(e=>Object.assign({},e,{[t]:e[t].map((e,t)=>t===o?Object.assign({},e,{completed:!e.completed}):e)}));var t,o},style:[Ht.checkButton,{backgroundColor:t.completed?o.success:o.backgroundDefault}],children:(0,ce.jsx)(C.default,{name:"check",size:18,color:t.completed?"#FFF":o.textSecondary})})]},r))]},e.id))}),(0,ce.jsx)(j.default,{style:[Ht.footer,{backgroundColor:o.backgroundRoot,paddingBottom:e.bottom+M}],children:(0,ce.jsx)(vt,{onPress:()=>{const e=l.exercises.map(e=>({exerciseId:e.id,name:e.name,sets:h[e.id]||[],isBodyweight:e.isBodyweight||!1}));a.addWorkoutLog({workoutId:l.id,workoutName:l.name,completedAt:new Date,duration:Math.floor(i/60),exerciseLogs:e}),zt.notificationAsync(Wt.NotificationFeedbackType.Success),t.goBack()},children:"Finish Workout"})})]})}const Ht=a.default.create({container:{flex:1},header:{paddingHorizontal:M,paddingBottom:M},headerTop:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginBottom:W},closeButton:{width:44,height:44,alignItems:"center",justifyContent:"center"},timer:{flexDirection:"row",alignItems:"center"},timerText:{color:"#FFF",marginLeft:z},pauseButton:{width:44,height:44,alignItems:"center",justifyContent:"center"},workoutName:{color:"#FFF",textAlign:"center",marginBottom:W},progress:{alignItems:"center"},progressBar:{width:"100%",height:6,backgroundColor:"rgba(255,255,255,0.3)",borderRadius:3,overflow:"hidden"},progressFill:{height:"100%",backgroundColor:"#FFF",borderRadius:3},progressText:{color:"#FFF",marginTop:A},scroll:{flex:1},exerciseCard:{marginBottom:M},exerciseName:{marginBottom:W},setsHeader:{flexDirection:"row",marginBottom:z,paddingHorizontal:A},setHeaderText:{color:"#757575",textAlign:"center"},setRow:{flexDirection:"row",alignItems:"center",paddingVertical:z,paddingHorizontal:A,borderRadius:X,marginBottom:A},setNumber:{width:40,alignItems:"center"},setInput:{flex:1,height:40,borderRadius:X,textAlign:"center",marginHorizontal:A,fontSize:16},checkButton:{width:44,height:44,borderRadius:X,alignItems:"center",justifyContent:"center"},footer:{position:"absolute",bottom:0,left:0,right:0,paddingHorizontal:M,paddingTop:M,borderTopWidth:1,borderTopColor:"#E0E0E0"}}),Nt=(0,w.createNativeStackNavigator)();function Et(){const e=st();return(0,ce.jsxs)(Nt.Navigator,{screenOptions:e,children:[(0,ce.jsx)(Nt.Screen,{name:"Workouts",component:pt,options:{headerTitle:"Workouts"}}),(0,ce.jsx)(Nt.Screen,{name:"CreateWorkout",component:Dt,options:{headerTitle:"Create Workout",presentation:"modal"}}),(0,ce.jsx)(Nt.Screen,{name:"WorkoutDetail",component:Pt,options:{headerTitle:"Workout"}}),(0,ce.jsx)(Nt.Screen,{name:"ActiveWorkout",component:Ot,options:{headerShown:!1,presentation:"fullScreenModal"}})]})}const Vt=ye.default.createAnimatedComponent(he.default),$t={code:"function FoodItemTsx1(e){const{onDelete,translateX,withTiming,withSpring}=this.__closure;if(e.translationX<-40&&onDelete){translateX.value=withTiming(-80);}else{translateX.value=withSpring(0);}}"},Ut={code:"function FoodItemTsx2(e){const{translateX}=this.__closure;if(e.translationX<0){translateX.value=Math.max(e.translationX,-80);}}"},Gt={code:"function FoodItemTsx3(){const{translateX,scale}=this.__closure;return{transform:[{translateX:translateX.value},{scale:scale.value}]};}"},Xt={code:"function FoodItemTsx4(){const{translateX}=this.__closure;return{opacity:translateX.value<-20?1:0};}"};function Yt({entry:e,food:t,onPress:r,onDelete:o,showMacros:n=!0}){const{theme:a}=de(),s=(0,ye.useSharedValue)(0),i=(0,ye.useSharedValue)(1),d=e?.food||t;if(!d)return null;const c=e?Math.round(d.calories*e.servings):d.calories,u=e?Math.round(d.protein*e.servings):d.protein,g=e?Math.round(d.carbs*e.servings):d.carbs,h=e?Math.round(d.fats*e.servings):d.fats,y=l.Gesture.Pan().activeOffsetX([-10,10]).onUpdate(function({_worklet_13047215145796_init_data:e,translateX:t}){const r=function(e){e.translationX<0&&(t.value=Math.max(e.translationX,-80))};return r.__closure={translateX:t},r.__workletHash=0xbddca9fc344,r.__initData=e,r}({_worklet_13047215145796_init_data:Ut,translateX:s})).onEnd(function({_worklet_4067228220569_init_data:e,onDelete:t,translateX:r,withTiming:o,withSpring:n}){const a=function(e){e.translationX<-40&&t?r.value=o(-80):r.value=n(0)};return a.__closure={onDelete:t,translateX:r,withTiming:o,withSpring:n},a.__workletHash=4067228220569,a.__initData=e,a}({_worklet_4067228220569_init_data:$t,onDelete:o,translateX:s,withTiming:ye.withTiming,withSpring:ye.withSpring})),x=(0,ye.useAnimatedStyle)(function({_worklet_1639592261956_init_data:e,translateX:t,scale:r}){const o=()=>({transform:[{translateX:t.value},{scale:r.value}]});return o.__closure={translateX:t,scale:r},o.__workletHash=1639592261956,o.__initData=e,o}({_worklet_1639592261956_init_data:Gt,translateX:s,scale:i})),m=(0,ye.useAnimatedStyle)(function({_worklet_897706448996_init_data:e,translateX:t}){const r=()=>({opacity:t.value<-20?1:0});return r.__closure={translateX:t},r.__workletHash=897706448996,r.__initData=e,r}({_worklet_897706448996_init_data:Xt,translateX:s}));return(0,ce.jsxs)(j.default,{style:Jt.wrapper,children:[(0,ce.jsx)(ye.default.View,{style:[Jt.deleteBackground,{backgroundColor:a.error},m],children:(0,ce.jsx)(he.default,{style:Jt.deleteButton,onPress:o,children:(0,ce.jsx)(C.default,{name:"trash-2",size:20,color:"#FFF"})})}),(0,ce.jsx)(l.GestureDetector,{gesture:y,children:(0,ce.jsxs)(Vt,{onPress:r,onPressIn:()=>{i.value=(0,ye.withSpring)(.98)},onPressOut:()=>{i.value=(0,ye.withSpring)(1)},style:[Jt.container,{backgroundColor:a.backgroundDefault},x],children:[(0,ce.jsxs)(j.default,{style:Jt.main,children:[(0,ce.jsx)(ge,{type:"body",numberOfLines:1,style:Jt.name,children:d.name}),(0,ce.jsx)(ge,{type:"small",style:{color:a.textSecondary},children:e?`${e.servings} serving${1!==e.servings?"s":""}`:d.servingSize})]}),(0,ce.jsxs)(j.default,{style:Jt.nutrition,children:[(0,ce.jsx)(ge,{type:"h4",style:{color:a.primary},children:c}),(0,ce.jsx)(ge,{type:"small",style:{color:a.textSecondary},children:"cal"})]}),n?(0,ce.jsxs)(j.default,{style:Jt.macros,children:[(0,ce.jsxs)(j.default,{style:Jt.macro,children:[(0,ce.jsxs)(ge,{type:"small",style:{color:a.protein},children:[u,"g"]}),(0,ce.jsx)(ge,{type:"small",style:[Jt.macroLabel,{color:a.textSecondary}],children:"P"})]}),(0,ce.jsxs)(j.default,{style:Jt.macro,children:[(0,ce.jsxs)(ge,{type:"small",style:{color:a.carbs},children:[g,"g"]}),(0,ce.jsx)(ge,{type:"small",style:[Jt.macroLabel,{color:a.textSecondary}],children:"C"})]}),(0,ce.jsxs)(j.default,{style:Jt.macro,children:[(0,ce.jsxs)(ge,{type:"small",style:{color:a.fats},children:[h,"g"]}),(0,ce.jsx)(ge,{type:"small",style:[Jt.macroLabel,{color:a.textSecondary}],children:"F"})]})]}):null]})})]})}const Jt=a.default.create({wrapper:{marginBottom:z},container:{flexDirection:"row",alignItems:"center",padding:W,borderRadius:Y},deleteBackground:{position:"absolute",right:0,top:0,bottom:z,width:80,borderRadius:Y,justifyContent:"center",alignItems:"center"},deleteButton:{width:44,height:44,justifyContent:"center",alignItems:"center"},main:{flex:1,marginRight:W},name:{marginBottom:2},nutrition:{alignItems:"center",marginRight:W},macros:{flexDirection:"row",gap:z},macro:{alignItems:"center"},macroLabel:{fontSize:10}}),qt={code:'function MealSectionTsx1(){const{rotation}=this.__closure;return{transform:[{rotate:rotation.value+"deg"}]};}'};function Qt({title:e,entries:t,onAddFood:r,onDeleteEntry:o}){const{theme:a}=de(),[s,l]=(0,n.useState)(!0),i=(0,ye.useSharedValue)(0),d=t.reduce((e,t)=>e+t.food.calories*t.servings,0),c=(0,ye.useAnimatedStyle)(function({_worklet_14420768638934_init_data:e,rotation:t}){const r=()=>({transform:[{rotate:`${t.value}deg`}]});return r.__closure={rotation:t},r.__workletHash=0xd1d98cac7d6,r.__initData=e,r}({_worklet_14420768638934_init_data:qt,rotation:i}));return(0,ce.jsxs)(j.default,{style:Kt.container,children:[(0,ce.jsxs)(he.default,{onPress:()=>{i.value=(0,ye.withTiming)(s?-90:0),l(!s)},style:Kt.header,children:[(0,ce.jsxs)(j.default,{style:Kt.titleRow,children:[(0,ce.jsx)(ye.default.View,{style:c,children:(0,ce.jsx)(C.default,{name:"chevron-down",size:20,color:a.textSecondary})}),(0,ce.jsx)(ge,{type:"h4",style:Kt.title,children:e})]}),(0,ce.jsxs)(j.default,{style:Kt.caloriesRow,children:[(0,ce.jsx)(ge,{type:"body",style:{color:a.primary},children:Math.round(d)}),(0,ce.jsxs)(ge,{type:"small",style:{color:a.textSecondary},children:[" ","cal"]})]})]}),s?(0,ce.jsxs)(j.default,{style:Kt.content,children:[t.map(e=>(0,ce.jsx)(Yt,{entry:e,onDelete:()=>o(e.id)},e.id)),(0,ce.jsxs)(he.default,{onPress:r,style:[Kt.addButton,{borderColor:a.border}],children:[(0,ce.jsx)(C.default,{name:"plus",size:18,color:a.primary}),(0,ce.jsx)(ge,{type:"small",style:{color:a.primary,marginLeft:4},children:"Add Food"})]})]}):null]})}const Kt=a.default.create({container:{marginBottom:M},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingVertical:z},titleRow:{flexDirection:"row",alignItems:"center"},title:{marginLeft:A},caloriesRow:{flexDirection:"row",alignItems:"baseline"},content:{marginTop:A},addButton:{flexDirection:"row",alignItems:"center",justifyContent:"center",paddingVertical:W,borderWidth:1,borderStyle:"dashed",borderRadius:Y}});var Zt=r(2440);const er=ye.default.createAnimatedComponent(Zt.Circle),tr={code:"function CircularProgressTsx1(){const{withSpring,clampedProgress}=this.__closure;return withSpring(clampedProgress,{damping:20,stiffness:90});}"},rr={code:"function CircularProgressTsx2(){const{circumference,animatedProgress}=this.__closure;const strokeDashoffset=circumference*(1-animatedProgress.value);return{strokeDashoffset:strokeDashoffset};}"};function or({progress:e,size:t=80,strokeWidth:r=8,color:o,showPercentage:n=!0}){const{theme:a}=de(),s=o||a.primary,l=(t-r)/2,i=2*Math.PI*l,d=t/2,c=Math.min(Math.max(e,0),1),u=(0,ye.useDerivedValue)(function({_worklet_14614921008336_init_data:e,withSpring:t,clampedProgress:r}){const o=function(){return t(r,{damping:20,stiffness:90})};return o.__closure={withSpring:t,clampedProgress:r},o.__workletHash=0xd4acd2cd4d0,o.__initData=e,o}({_worklet_14614921008336_init_data:tr,withSpring:ye.withSpring,clampedProgress:c}),[c]),g=(0,ye.useAnimatedProps)(function({_worklet_5390894828520_init_data:e,circumference:t,animatedProgress:r}){const o=function(){return{strokeDashoffset:t*(1-r.value)}};return o.__closure={circumference:t,animatedProgress:r},o.__workletHash=5390894828520,o.__initData=e,o}({_worklet_5390894828520_init_data:rr,circumference:i,animatedProgress:u}));return(0,ce.jsxs)(j.default,{style:[nr.container,{width:t,height:t}],children:[(0,ce.jsxs)(Zt.default,{width:t,height:t,children:[(0,ce.jsx)(Zt.Circle,{cx:d,cy:d,r:l,stroke:a.backgroundDefault,strokeWidth:r,fill:"transparent"}),(0,ce.jsx)(er,{cx:d,cy:d,r:l,stroke:s,strokeWidth:r,fill:"transparent",strokeDasharray:i,animatedProps:g,strokeLinecap:"round",transform:`rotate(-90 ${d} ${d})`})]}),n?(0,ce.jsx)(j.default,{style:nr.labelContainer,children:(0,ce.jsxs)(ge,{type:"h4",style:{color:s},children:[Math.round(100*c),"%"]})}):null]})}const nr=a.default.create({container:{justifyContent:"center",alignItems:"center"},labelContainer:{position:"absolute",justifyContent:"center",alignItems:"center"}});function ar(){const e=(0,d.useSafeAreaInsets)(),t=(0,T.useHeaderHeight)(),r=(0,S.useBottomTabBarHeight)(),o=(0,s.useNavigation)(),{theme:a}=de(),l=Ye(),[i,c]=(0,n.useState)((new Date).toISOString().split("T")[0]),u=l.getDailyNutrition(i),g=l.getFoodEntriesForDate(i),h=e=>g.filter(t=>t.mealType===e),y=e=>{const t=new Date(i);t.setDate(t.getDate()+e),c(t.toISOString().split("T")[0])},x=[{icon:"camera",label:"Scan Label",onPress:()=>o.navigate("ScanNutrition")},{icon:"edit-2",label:"Add Manually",onPress:()=>o.navigate("AddFood")},{icon:"book-open",label:"Log Meal Prep",onPress:()=>o.navigate("LogMeal")},{icon:"plus-circle",label:"Create Meal",onPress:()=>o.navigate("MealCreator")},{icon:"database",label:"My Foods",onPress:()=>o.navigate("FoodDatabase")},{icon:"book",label:"My Meals",onPress:()=>o.navigate("MyMeals")}],m=l.profile.goals.dailyCalories>0?u.calories/l.profile.goals.dailyCalories:0;return(0,ce.jsxs)(j.default,{style:[sr.container,{backgroundColor:a.backgroundRoot}],children:[(0,ce.jsxs)(v.default,{style:sr.scroll,contentContainerStyle:{paddingTop:t+L,paddingBottom:r+E,paddingHorizontal:M},scrollIndicatorInsets:{bottom:e.bottom},children:[(0,ce.jsxs)(j.default,{style:sr.dateNav,children:[(0,ce.jsx)(he.default,{onPress:()=>y(-1),style:[sr.dateButton,{backgroundColor:a.backgroundDefault}],children:(0,ce.jsx)(C.default,{name:"chevron-left",size:20,color:a.text})}),(0,ce.jsx)(ge,{type:"h4",children:(e=>{const t=new Date(e),r=(new Date).toISOString().split("T")[0],o=new Date(Date.now()-864e5).toISOString().split("T")[0];return e===r?"Today":e===o?"Yesterday":t.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})})(i)}),(0,ce.jsx)(he.default,{onPress:()=>y(1),style:[sr.dateButton,{backgroundColor:a.backgroundDefault}],children:(0,ce.jsx)(C.default,{name:"chevron-right",size:20,color:a.text})})]}),(0,ce.jsxs)(fe,{style:sr.summaryCard,children:[(0,ce.jsxs)(j.default,{style:sr.caloriesHeader,children:[(0,ce.jsxs)(j.default,{children:[(0,ce.jsx)(ge,{type:"small",style:{color:a.textSecondary},children:"Calories"}),(0,ce.jsxs)(j.default,{style:sr.caloriesValue,children:[(0,ce.jsx)(ge,{type:"h1",style:{color:a.primary},children:Math.round(u.calories)}),(0,ce.jsxs)(ge,{type:"body",style:{color:a.textSecondary},children:["/",l.profile.goals.dailyCalories]})]})]}),(0,ce.jsx)(or,{progress:m,size:80,strokeWidth:8,color:a.primary,showPercentage:!0})]}),(0,ce.jsxs)(j.default,{style:sr.macrosRow,children:[(0,ce.jsx)(ve,{label:"Protein",current:u.protein,goal:l.profile.goals.dailyProtein,color:a.protein}),(0,ce.jsx)(j.default,{style:sr.macroSpacer}),(0,ce.jsx)(ve,{label:"Carbs",current:u.carbs,goal:l.profile.goals.dailyCarbs,color:a.carbs}),(0,ce.jsx)(j.default,{style:sr.macroSpacer}),(0,ce.jsx)(ve,{label:"Fats",current:u.fats,goal:l.profile.goals.dailyFats,color:a.fats})]})]}),(0,ce.jsx)(Qt,{title:"Breakfast",entries:h("breakfast"),onAddFood:()=>o.navigate("AddFood",{mealType:"breakfast"}),onDeleteEntry:e=>l.deleteFoodEntry(e)}),(0,ce.jsx)(Qt,{title:"Lunch",entries:h("lunch"),onAddFood:()=>o.navigate("AddFood",{mealType:"lunch"}),onDeleteEntry:e=>l.deleteFoodEntry(e)}),(0,ce.jsx)(Qt,{title:"Dinner",entries:h("dinner"),onAddFood:()=>o.navigate("AddFood",{mealType:"dinner"}),onDeleteEntry:e=>l.deleteFoodEntry(e)}),(0,ce.jsx)(Qt,{title:"Snacks",entries:h("snack"),onAddFood:()=>o.navigate("AddFood",{mealType:"snack"}),onDeleteEntry:e=>l.deleteFoodEntry(e)})]}),(0,ce.jsx)(We,{actions:x})]})}const sr=a.default.create({container:{flex:1},scroll:{flex:1},dateNav:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginBottom:L},dateButton:{width:40,height:40,borderRadius:Y,alignItems:"center",justifyContent:"center"},summaryCard:{marginBottom:L},caloriesHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:M},caloriesValue:{flexDirection:"row",alignItems:"baseline"},macrosRow:{flexDirection:"row"},macroSpacer:{width:M}});function lr(){const e=(0,d.useSafeAreaInsets)(),t=(0,T.useHeaderHeight)(),r=(0,s.useNavigation)(),o=(0,s.useRoute)(),{theme:a}=de(),l=Ye(),i=o.params?.mealType||"snack",c=(new Date).toISOString().split("T")[0],[u,g]=(0,n.useState)("select"),[h,y]=(0,n.useState)(""),[x,m]=(0,n.useState)(null),[p,f]=(0,n.useState)("1"),[b,w]=(0,n.useState)({name:"",servingSize:"",calories:"",protein:"",carbs:"",fats:"",fiber:""}),[S,k]=(0,n.useState)(!0),v=l.foods.filter(e=>e.name.toLowerCase().includes(h.toLowerCase()));return(0,ce.jsxs)(wt,{style:{flex:1,backgroundColor:a.backgroundRoot},contentContainerStyle:{paddingTop:t+L,paddingBottom:e.bottom+L,paddingHorizontal:M},children:[(0,ce.jsxs)(j.default,{style:ir.tabs,children:[(0,ce.jsx)(he.default,{onPress:()=>g("select"),style:[ir.tab,"select"===u&&{backgroundColor:a.primary}],children:(0,ce.jsx)(ge,{type:"small",style:{color:"select"===u?"#FFF":a.text},children:"Select Food"})}),(0,ce.jsx)(he.default,{onPress:()=>g("create"),style:[ir.tab,"create"===u&&{backgroundColor:a.primary}],children:(0,ce.jsx)(ge,{type:"small",style:{color:"create"===u?"#FFF":a.text},children:"Create New"})})]}),"select"===u?(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsxs)(j.default,{style:[ir.searchBar,{backgroundColor:a.backgroundDefault}],children:[(0,ce.jsx)(C.default,{name:"search",size:18,color:a.textSecondary}),(0,ce.jsx)(bt.default,{value:h,onChangeText:y,placeholder:"Search foods...",placeholderTextColor:a.textSecondary,style:[ir.searchInput,{color:a.text}]})]}),x?(0,ce.jsxs)(fe,{style:ir.selectedCard,children:[(0,ce.jsxs)(j.default,{style:ir.selectedHeader,children:[(0,ce.jsx)(ge,{type:"h4",children:"Selected"}),(0,ce.jsx)(he.default,{onPress:()=>m(null),children:(0,ce.jsx)(C.default,{name:"x",size:20,color:a.textSecondary})})]}),(0,ce.jsx)(Yt,{food:x,showMacros:!0}),(0,ce.jsxs)(j.default,{style:ir.servingsRow,children:[(0,ce.jsx)(ge,{type:"body",children:"Servings:"}),(0,ce.jsx)(bt.default,{value:p,onChangeText:f,keyboardType:"decimal-pad",style:[ir.servingsInput,{backgroundColor:a.backgroundDefault,color:a.text}]})]}),(0,ce.jsxs)(vt,{onPress:()=>{x&&(l.addFoodEntry({foodId:x.id,food:x,mealType:i,servings:parseFloat(p)||1,date:c}),r.goBack())},children:["Add to ",i]})]}):(0,ce.jsxs)(j.default,{style:ir.foodList,children:[v.map(e=>(0,ce.jsx)(Yt,{food:e,onPress:()=>(e=>{m(e)})(e),showMacros:!1},e.id)),0===v.length?(0,ce.jsxs)(j.default,{style:ir.empty,children:[(0,ce.jsx)(C.default,{name:"search",size:40,color:a.textSecondary}),(0,ce.jsx)(ge,{type:"body",style:{color:a.textSecondary,marginTop:W},children:"No foods found"}),(0,ce.jsx)(he.default,{onPress:()=>g("create"),style:[ir.createLink,{borderColor:a.primary}],children:(0,ce.jsx)(ge,{type:"body",style:{color:a.primary},children:"Create a new food"})})]}):null]})]}):(0,ce.jsxs)(j.default,{style:ir.createForm,children:[(0,ce.jsxs)(j.default,{style:ir.field,children:[(0,ce.jsx)(ge,{type:"small",style:{color:a.textSecondary},children:"Food Name *"}),(0,ce.jsx)(bt.default,{value:b.name,onChangeText:e=>w(Object.assign({},b,{name:e})),placeholder:"e.g., Chicken Breast",placeholderTextColor:a.textSecondary,style:[ir.input,{backgroundColor:a.backgroundDefault,color:a.text}]})]}),(0,ce.jsxs)(j.default,{style:ir.field,children:[(0,ce.jsx)(ge,{type:"small",style:{color:a.textSecondary},children:"Serving Size"}),(0,ce.jsx)(bt.default,{value:b.servingSize,onChangeText:e=>w(Object.assign({},b,{servingSize:e})),placeholder:"e.g., 100g or 1 cup",placeholderTextColor:a.textSecondary,style:[ir.input,{backgroundColor:a.backgroundDefault,color:a.text}]})]}),(0,ce.jsxs)(fe,{style:ir.nutritionCard,children:[(0,ce.jsx)(ge,{type:"h4",style:ir.nutritionTitle,children:"Nutrition Facts"}),(0,ce.jsxs)(j.default,{style:ir.nutritionGrid,children:[(0,ce.jsxs)(j.default,{style:ir.nutritionField,children:[(0,ce.jsx)(ge,{type:"small",style:{color:a.textSecondary},children:"Calories"}),(0,ce.jsx)(bt.default,{value:b.calories,onChangeText:e=>w(Object.assign({},b,{calories:e})),keyboardType:"decimal-pad",placeholder:"0",placeholderTextColor:a.textSecondary,style:[ir.nutritionInput,{backgroundColor:a.backgroundSecondary,color:a.text}]})]}),(0,ce.jsxs)(j.default,{style:ir.nutritionField,children:[(0,ce.jsx)(ge,{type:"small",style:{color:a.protein},children:"Protein (g)"}),(0,ce.jsx)(bt.default,{value:b.protein,onChangeText:e=>w(Object.assign({},b,{protein:e})),keyboardType:"decimal-pad",placeholder:"0",placeholderTextColor:a.textSecondary,style:[ir.nutritionInput,{backgroundColor:a.backgroundSecondary,color:a.text}]})]}),(0,ce.jsxs)(j.default,{style:ir.nutritionField,children:[(0,ce.jsx)(ge,{type:"small",style:{color:a.carbs},children:"Carbs (g)"}),(0,ce.jsx)(bt.default,{value:b.carbs,onChangeText:e=>w(Object.assign({},b,{carbs:e})),keyboardType:"decimal-pad",placeholder:"0",placeholderTextColor:a.textSecondary,style:[ir.nutritionInput,{backgroundColor:a.backgroundSecondary,color:a.text}]})]}),(0,ce.jsxs)(j.default,{style:ir.nutritionField,children:[(0,ce.jsx)(ge,{type:"small",style:{color:a.fats},children:"Fats (g)"}),(0,ce.jsx)(bt.default,{value:b.fats,onChangeText:e=>w(Object.assign({},b,{fats:e})),keyboardType:"decimal-pad",placeholder:"0",placeholderTextColor:a.textSecondary,style:[ir.nutritionInput,{backgroundColor:a.backgroundSecondary,color:a.text}]})]}),(0,ce.jsxs)(j.default,{style:ir.nutritionField,children:[(0,ce.jsx)(ge,{type:"small",style:{color:a.textSecondary},children:"Fiber (g)"}),(0,ce.jsx)(bt.default,{value:b.fiber,onChangeText:e=>w(Object.assign({},b,{fiber:e})),keyboardType:"decimal-pad",placeholder:"0",placeholderTextColor:a.textSecondary,style:[ir.nutritionInput,{backgroundColor:a.backgroundSecondary,color:a.text}]})]})]})]}),(0,ce.jsxs)(he.default,{onPress:()=>k(!S),style:ir.checkboxRow,children:[(0,ce.jsx)(j.default,{style:[ir.checkbox,{backgroundColor:S?a.primary:a.backgroundDefault,borderColor:S?a.primary:a.border}],children:S?(0,ce.jsx)(C.default,{name:"check",size:14,color:"#FFF"}):null}),(0,ce.jsx)(ge,{type:"body",children:"Save to My Foods"})]}),(0,ce.jsx)(vt,{onPress:()=>{if(!b.name.trim())return;const e=l.addFood({name:b.name.trim(),servingSize:b.servingSize||"1 serving",calories:parseFloat(b.calories)||0,protein:parseFloat(b.protein)||0,carbs:parseFloat(b.carbs)||0,fats:parseFloat(b.fats)||0,fiber:parseFloat(b.fiber)||0,isSaved:S});l.addFoodEntry({foodId:e.id,food:e,mealType:i,servings:1,date:c}),r.goBack()},disabled:!b.name.trim(),children:"Add Food"})]})]})}const ir=a.default.create({tabs:{flexDirection:"row",marginBottom:L,gap:z},tab:{flex:1,paddingVertical:W,alignItems:"center",borderRadius:K,backgroundColor:"transparent"},searchBar:{flexDirection:"row",alignItems:"center",paddingHorizontal:W,height:V,borderRadius:Y,marginBottom:M},searchInput:{flex:1,marginLeft:z,fontSize:16},foodList:{},selectedCard:{marginBottom:M},selectedHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:W},servingsRow:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginVertical:M},servingsInput:{width:80,height:40,borderRadius:X,textAlign:"center",fontSize:16},empty:{alignItems:"center",paddingVertical:H},createLink:{marginTop:M,paddingVertical:W,paddingHorizontal:L,borderWidth:1,borderRadius:K},createForm:{},field:{marginBottom:M},input:{height:V,borderRadius:Y,paddingHorizontal:M,marginTop:A,fontSize:16},nutritionCard:{marginBottom:M},nutritionTitle:{marginBottom:W},nutritionGrid:{flexDirection:"row",flexWrap:"wrap",gap:W},nutritionField:{width:"30%",flexGrow:1},nutritionInput:{height:40,borderRadius:X,textAlign:"center",marginTop:A,fontSize:16},checkboxRow:{flexDirection:"row",alignItems:"center",marginBottom:L},checkbox:{width:24,height:24,borderRadius:G,borderWidth:2,alignItems:"center",justifyContent:"center",marginRight:W}});function dr(){const e=(0,d.useSafeAreaInsets)(),t=(0,T.useHeaderHeight)(),r=(0,S.useBottomTabBarHeight)(),o=(0,s.useNavigation)(),{theme:a}=de(),l=Ye(),[i,c]=(0,n.useState)(""),u=l.foods.filter(e=>e.isSaved&&e.name.toLowerCase().includes(i.toLowerCase()));return(0,ce.jsxs)(wt,{style:{flex:1,backgroundColor:a.backgroundRoot},contentContainerStyle:{paddingTop:t+L,paddingBottom:r+L,paddingHorizontal:M},scrollIndicatorInsets:{bottom:e.bottom},children:[(0,ce.jsxs)(j.default,{style:[cr.searchBar,{backgroundColor:a.backgroundDefault}],children:[(0,ce.jsx)(C.default,{name:"search",size:18,color:a.textSecondary}),(0,ce.jsx)(bt.default,{value:i,onChangeText:c,placeholder:"Search your foods...",placeholderTextColor:a.textSecondary,style:[cr.searchInput,{color:a.text}]})]}),(0,ce.jsxs)(j.default,{style:cr.header,children:[(0,ce.jsxs)(ge,{type:"h4",children:["Saved Foods (",u.length,")"]}),(0,ce.jsxs)(he.default,{onPress:()=>o.navigate("ScanNutrition"),style:[cr.scanButton,{backgroundColor:a.primary}],children:[(0,ce.jsx)(C.default,{name:"camera",size:16,color:"#FFF"}),(0,ce.jsx)(ge,{type:"small",style:{color:"#FFF",marginLeft:4},children:"Scan New"})]})]}),0===u.length?(0,ce.jsxs)(j.default,{style:cr.empty,children:[(0,ce.jsx)(C.default,{name:"database",size:48,color:a.textSecondary}),(0,ce.jsx)(ge,{type:"body",style:{color:a.textSecondary,marginTop:W},children:i?"No matching foods":"No saved foods yet"}),(0,ce.jsx)(ge,{type:"small",style:{color:a.textSecondary,marginTop:z,textAlign:"center"},children:"Scan nutrition labels or create foods manually to build your personal database"})]}):(0,ce.jsx)(j.default,{style:cr.foodList,children:u.map(e=>(0,ce.jsx)(Yt,{food:e,onPress:()=>o.navigate("EditFood",{foodId:e.id}),onDelete:()=>(e=>{const t=l.foods.find(t=>t.id===e);Rt.default.alert("Delete Food",`Are you sure you want to delete "${t?.name}"?`,[{text:"Cancel",style:"cancel"},{text:"Delete",style:"destructive",onPress:()=>l.deleteFood(e)}])})(e.id),showMacros:!0},e.id))})]})}const cr=a.default.create({searchBar:{flexDirection:"row",alignItems:"center",paddingHorizontal:W,height:V,borderRadius:Y,marginBottom:M},searchInput:{flex:1,marginLeft:z,fontSize:16},header:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:M},scanButton:{flexDirection:"row",alignItems:"center",paddingVertical:z,paddingHorizontal:W,borderRadius:K},foodList:{},empty:{alignItems:"center",paddingVertical:N}});var ur=r(2358);r(262),r(8852);function gr(){const e=(0,d.useSafeAreaInsets)(),t=(0,s.useNavigation)(),{theme:r}=de(),[o,a]=(Ye(),(0,ur.useCameraPermissions)()),[l,i]=(0,n.useState)(null),[c,u]=(0,n.useState)(!1),[g,h]=(0,n.useState)(null),[y,x]=((0,n.useRef)(null),(0,n.useState)(null));return(0,ce.jsx)(Lt,{style:[hr.container,{paddingTop:e.top,paddingBottom:e.bottom}],children:(0,ce.jsxs)(j.default,{style:hr.webFallback,children:[(0,ce.jsx)(C.default,{name:"camera-off",size:48,color:r.textSecondary}),(0,ce.jsx)(ge,{type:"h4",style:{marginTop:M,textAlign:"center"},children:"Camera not available on web"}),(0,ce.jsx)(ge,{type:"body",style:{color:r.textSecondary,marginTop:z,textAlign:"center"},children:"Run this app in Expo Go on your phone to scan nutrition labels"}),(0,ce.jsx)(vt,{onPress:()=>t.goBack(),style:{marginTop:L},children:"Go Back"})]})})}const hr=a.default.create({container:{flex:1},centered:{flex:1,justifyContent:"center",alignItems:"center",padding:L},webFallback:{flex:1,justifyContent:"center",alignItems:"center",padding:L},camera:{flex:1},overlay:{flex:1,backgroundColor:"rgba(0,0,0,0.3)"},topBar:{flexDirection:"row",justifyContent:"flex-start",padding:M},closeButton:{padding:z},viewfinder:{flex:1,marginHorizontal:O,marginVertical:N,position:"relative"},corner:{position:"absolute",width:40,height:40,borderColor:"#FFF"},topLeft:{top:0,left:0,borderTopWidth:3,borderLeftWidth:3},topRight:{top:0,right:0,borderTopWidth:3,borderRightWidth:3},bottomLeft:{bottom:0,left:0,borderBottomWidth:3,borderLeftWidth:3},bottomRight:{bottom:0,right:0,borderBottomWidth:3,borderRightWidth:3},instruction:{color:"#FFF",textAlign:"center",marginBottom:L},bottomBar:{flexDirection:"row",justifyContent:"space-around",alignItems:"center",paddingHorizontal:O},galleryButton:{width:44,height:44,borderRadius:22,backgroundColor:"rgba(255,255,255,0.2)",alignItems:"center",justifyContent:"center"},captureButton:{width:70,height:70,borderRadius:35,backgroundColor:"#FFF",alignItems:"center",justifyContent:"center"},captureInner:{width:58,height:58,borderRadius:29,backgroundColor:"#FFF",borderWidth:3,borderColor:"#000"},header:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginBottom:M},headerButton:{width:44,height:44,alignItems:"center",justifyContent:"center"},previewImage:{width:"100%",height:200,borderRadius:J,marginBottom:M},analyzing:{alignItems:"center",paddingVertical:H},resultCard:{marginBottom:M},resultTitle:{marginBottom:M},resultRow:{flexDirection:"row",justifyContent:"space-between",paddingVertical:z},divider:{height:1,marginVertical:W},macroRow:{flexDirection:"row",justifyContent:"space-around",marginVertical:M},macroItem:{alignItems:"center"},errorContainer:{alignItems:"center",paddingVertical:L}});function yr(){const e=(0,d.useSafeAreaInsets)(),t=(0,T.useHeaderHeight)(),r=(0,s.useNavigation)(),o=(0,s.useRoute)(),{theme:a}=de(),l=Ye(),i=o.params?.mealId,c=i?l.getMealById(i):null,[u,g]=(0,n.useState)(c?.name||""),[h,y]=(0,n.useState)(c?.totalServings?.toString()||"4"),[x,m]=(0,n.useState)(c?.ingredients||[]),[p,f]=(0,n.useState)({name:"",amount:"",unit:"g",calories:"",protein:"",carbs:"",fats:"",fiber:""}),[b,w]=(0,n.useState)(null),[S,k]=(0,n.useState)(!1),[v,I]=(0,n.useState)(""),F=(0,n.useMemo)(()=>{if(!v.trim())return l.foods;const e=v.toLowerCase();return l.foods.filter(t=>t.name.toLowerCase().includes(e))},[l.foods,v]),D=()=>x.reduce((e,t)=>({calories:e.calories+t.calories,protein:e.protein+t.protein,carbs:e.carbs+t.carbs,fats:e.fats+t.fats,fiber:e.fiber+t.fiber}),{calories:0,protein:0,carbs:0,fats:0,fiber:0}),B=D(),R=(()=>{const e=D(),t=parseFloat(h)||1;return{calories:e.calories/t,protein:e.protein/t,carbs:e.carbs/t,fats:e.fats/t,fiber:e.fiber/t}})();return(0,ce.jsxs)(wt,{style:{flex:1,backgroundColor:a.backgroundRoot},contentContainerStyle:{paddingTop:t+L,paddingBottom:e.bottom+E,paddingHorizontal:M},children:[(0,ce.jsxs)(j.default,{style:xr.field,children:[(0,ce.jsx)(ge,{type:"small",style:{color:a.textSecondary},children:"Meal Name *"}),(0,ce.jsx)(bt.default,{value:u,onChangeText:g,placeholder:"e.g., Chicken Rice Bowl",placeholderTextColor:a.textSecondary,style:[xr.input,{backgroundColor:a.backgroundDefault,color:a.text}]})]}),(0,ce.jsxs)(j.default,{style:xr.field,children:[(0,ce.jsx)(ge,{type:"small",style:{color:a.textSecondary},children:"Total Servings (batch size)"}),(0,ce.jsx)(bt.default,{value:h,onChangeText:y,placeholder:"4",keyboardType:"decimal-pad",placeholderTextColor:a.textSecondary,style:[xr.input,{backgroundColor:a.backgroundDefault,color:a.text,width:100}]})]}),(0,ce.jsxs)(fe,{style:xr.ingredientsCard,children:[(0,ce.jsxs)(j.default,{style:xr.sectionHeader,children:[(0,ce.jsx)(ge,{type:"h4",children:"Ingredients"}),(0,ce.jsxs)(ge,{type:"small",style:{color:a.textSecondary},children:[x.length," items"]})]}),x.map(e=>(0,ce.jsxs)(j.default,{style:[xr.ingredientItem,{borderBottomColor:a.border}],children:[(0,ce.jsxs)(j.default,{style:xr.ingredientInfo,children:[(0,ce.jsx)(ge,{type:"body",children:e.name}),(0,ce.jsxs)(ge,{type:"small",style:{color:a.textSecondary},children:[e.amount," ",e.unit," - ",Math.round(e.calories)," cal"]})]}),(0,ce.jsx)(he.default,{onPress:()=>{return t=e.id,void m(x.filter(e=>e.id!==t));var t},hitSlop:8,children:(0,ce.jsx)(C.default,{name:"x",size:20,color:a.error})})]},e.id)),0===x.length?(0,ce.jsxs)(j.default,{style:xr.emptyIngredients,children:[(0,ce.jsx)(C.default,{name:"list",size:32,color:a.textSecondary}),(0,ce.jsx)(ge,{type:"body",style:{color:a.textSecondary,marginTop:z},children:"No ingredients added yet"})]}):null]}),(0,ce.jsxs)(fe,{style:xr.storedFoodsCard,children:[(0,ce.jsxs)(he.default,{onPress:()=>k(!S),style:xr.storedFoodsHeader,children:[(0,ce.jsxs)(j.default,{style:xr.storedFoodsHeaderLeft,children:[(0,ce.jsx)(C.default,{name:"database",size:18,color:a.primary}),(0,ce.jsx)(ge,{type:"h4",style:{marginLeft:z},children:"Stored Foods"})]}),(0,ce.jsxs)(j.default,{style:xr.storedFoodsHeaderRight,children:[(0,ce.jsxs)(ge,{type:"small",style:{color:a.textSecondary},children:[l.foods.length," items"]}),(0,ce.jsx)(C.default,{name:S?"chevron-up":"chevron-down",size:20,color:a.textSecondary,style:{marginLeft:A}})]})]}),S?(0,ce.jsxs)(j.default,{style:xr.storedFoodsContent,children:[(0,ce.jsx)(bt.default,{value:v,onChangeText:I,placeholder:"Search stored foods...",placeholderTextColor:a.textSecondary,style:[xr.searchInput,{backgroundColor:a.backgroundSecondary,color:a.text}]}),0===F.length?(0,ce.jsxs)(j.default,{style:xr.emptyStoredFoods,children:[(0,ce.jsx)(C.default,{name:"inbox",size:24,color:a.textSecondary}),(0,ce.jsx)(ge,{type:"small",style:{color:a.textSecondary,marginTop:A},children:0===l.foods.length?"No stored foods yet":"No matching foods"})]}):F.slice(0,8).map(e=>(0,ce.jsxs)(he.default,{onPress:()=>(e=>{const t=parseFloat(e.servingSize)||100;w({originalServingSize:t,originalCalories:e.calories,originalProtein:e.protein,originalCarbs:e.carbs,originalFats:e.fats,originalFiber:e.fiber||0}),f({name:e.name,amount:String(t),unit:"g",calories:String(e.calories),protein:String(e.protein),carbs:String(e.carbs),fats:String(e.fats),fiber:String(e.fiber||0)}),k(!1),I("")})(e),style:[xr.storedFoodItem,{borderBottomColor:a.border}],children:[(0,ce.jsxs)(j.default,{style:xr.storedFoodInfo,children:[(0,ce.jsx)(ge,{type:"body",children:e.name}),(0,ce.jsxs)(ge,{type:"small",style:{color:a.textSecondary},children:[e.calories," cal - P:",e.protein,"g C:",e.carbs,"g F:",e.fats,"g"]})]}),(0,ce.jsx)(C.default,{name:"plus-circle",size:20,color:a.primary})]},e.id)),F.length>8?(0,ce.jsxs)(ge,{type:"small",style:{color:a.textSecondary,textAlign:"center",marginTop:z},children:["+",F.length-8," more - refine your search"]}):null]}):null]}),(0,ce.jsxs)(fe,{style:xr.addIngredientCard,children:[(0,ce.jsx)(ge,{type:"h4",style:{marginBottom:W},children:"Add Ingredient"}),(0,ce.jsxs)(j.default,{style:xr.ingredientRow,children:[(0,ce.jsxs)(j.default,{style:[xr.ingredientField,{flex:2}],children:[(0,ce.jsx)(ge,{type:"small",style:{color:a.textSecondary},children:"Name *"}),(0,ce.jsx)(bt.default,{value:p.name,onChangeText:e=>f(Object.assign({},p,{name:e})),placeholder:"Ingredient name",placeholderTextColor:a.textSecondary,style:[xr.smallInput,{backgroundColor:a.backgroundSecondary,color:a.text}]})]}),(0,ce.jsxs)(j.default,{style:xr.ingredientField,children:[(0,ce.jsx)(ge,{type:"small",style:{color:a.textSecondary},children:"Amount"}),(0,ce.jsx)(bt.default,{value:p.amount,onChangeText:e=>{if(b){const t=(parseFloat(e)||0)/b.originalServingSize;f(Object.assign({},p,{amount:e,calories:String(Math.round(b.originalCalories*t*10)/10),protein:String(Math.round(b.originalProtein*t*10)/10),carbs:String(Math.round(b.originalCarbs*t*10)/10),fats:String(Math.round(b.originalFats*t*10)/10),fiber:String(Math.round(b.originalFiber*t*10)/10)}))}else f(Object.assign({},p,{amount:e}))},placeholder:"100",keyboardType:"decimal-pad",placeholderTextColor:a.textSecondary,style:[xr.smallInput,{backgroundColor:a.backgroundSecondary,color:a.text}]})]}),(0,ce.jsxs)(j.default,{style:xr.ingredientField,children:[(0,ce.jsx)(ge,{type:"small",style:{color:a.textSecondary},children:"Unit"}),(0,ce.jsx)(bt.default,{value:p.unit,onChangeText:e=>f(Object.assign({},p,{unit:e})),placeholder:"g",placeholderTextColor:a.textSecondary,style:[xr.smallInput,{backgroundColor:a.backgroundSecondary,color:a.text}]})]})]}),(0,ce.jsxs)(j.default,{style:xr.nutritionRow,children:[(0,ce.jsxs)(j.default,{style:xr.nutritionField,children:[(0,ce.jsx)(ge,{type:"small",style:{color:a.textSecondary},children:"Calories"}),(0,ce.jsx)(bt.default,{value:p.calories,onChangeText:e=>f(Object.assign({},p,{calories:e})),placeholder:"0",keyboardType:"decimal-pad",placeholderTextColor:a.textSecondary,style:[xr.nutritionInput,{backgroundColor:a.backgroundSecondary,color:a.text}]})]}),(0,ce.jsxs)(j.default,{style:xr.nutritionField,children:[(0,ce.jsx)(ge,{type:"small",style:{color:a.protein},children:"Protein"}),(0,ce.jsx)(bt.default,{value:p.protein,onChangeText:e=>f(Object.assign({},p,{protein:e})),placeholder:"0",keyboardType:"decimal-pad",placeholderTextColor:a.textSecondary,style:[xr.nutritionInput,{backgroundColor:a.backgroundSecondary,color:a.text}]})]}),(0,ce.jsxs)(j.default,{style:xr.nutritionField,children:[(0,ce.jsx)(ge,{type:"small",style:{color:a.carbs},children:"Carbs"}),(0,ce.jsx)(bt.default,{value:p.carbs,onChangeText:e=>f(Object.assign({},p,{carbs:e})),placeholder:"0",keyboardType:"decimal-pad",placeholderTextColor:a.textSecondary,style:[xr.nutritionInput,{backgroundColor:a.backgroundSecondary,color:a.text}]})]}),(0,ce.jsxs)(j.default,{style:xr.nutritionField,children:[(0,ce.jsx)(ge,{type:"small",style:{color:a.fats},children:"Fats"}),(0,ce.jsx)(bt.default,{value:p.fats,onChangeText:e=>f(Object.assign({},p,{fats:e})),placeholder:"0",keyboardType:"decimal-pad",placeholderTextColor:a.textSecondary,style:[xr.nutritionInput,{backgroundColor:a.backgroundSecondary,color:a.text}]})]}),(0,ce.jsxs)(j.default,{style:xr.nutritionField,children:[(0,ce.jsx)(ge,{type:"small",style:{color:a.textSecondary},children:"Fiber"}),(0,ce.jsx)(bt.default,{value:p.fiber,onChangeText:e=>f(Object.assign({},p,{fiber:e})),placeholder:"0",keyboardType:"decimal-pad",placeholderTextColor:a.textSecondary,style:[xr.nutritionInput,{backgroundColor:a.backgroundSecondary,color:a.text}]})]})]}),(0,ce.jsxs)(he.default,{onPress:()=>{if(!p.name.trim())return;const e={id:Math.random().toString(36).substring(2,15),name:p.name.trim(),amount:parseFloat(p.amount)||1,unit:p.unit||"g",calories:parseFloat(p.calories)||0,protein:parseFloat(p.protein)||0,carbs:parseFloat(p.carbs)||0,fats:parseFloat(p.fats)||0,fiber:parseFloat(p.fiber)||0};m([...x,e]),f({name:"",amount:"",unit:"g",calories:"",protein:"",carbs:"",fats:"",fiber:""}),w(null)},disabled:!p.name.trim(),style:[xr.addButton,{backgroundColor:p.name.trim()?a.primary:a.backgroundDefault}],children:[(0,ce.jsx)(C.default,{name:"plus",size:18,color:p.name.trim()?"#FFF":a.textSecondary}),(0,ce.jsx)(ge,{type:"body",style:{color:p.name.trim()?"#FFF":a.textSecondary,marginLeft:A},children:"Add Ingredient"})]})]}),x.length>0?(0,ce.jsxs)(fe,{style:xr.totalsCard,children:[(0,ce.jsx)(ge,{type:"h4",style:{marginBottom:W},children:"Nutrition Summary"}),(0,ce.jsxs)(j.default,{style:xr.totalsRow,children:[(0,ce.jsxs)(j.default,{style:xr.totalsColumn,children:[(0,ce.jsx)(ge,{type:"small",style:{color:a.textSecondary},children:"Total Batch"}),(0,ce.jsx)(ge,{type:"h3",children:Math.round(B.calories)}),(0,ce.jsx)(ge,{type:"small",style:{color:a.textSecondary},children:"calories"}),(0,ce.jsxs)(j.default,{style:xr.macroList,children:[(0,ce.jsxs)(ge,{type:"small",style:{color:a.protein},children:["P: ",Math.round(B.protein),"g"]}),(0,ce.jsxs)(ge,{type:"small",style:{color:a.carbs},children:["C: ",Math.round(B.carbs),"g"]}),(0,ce.jsxs)(ge,{type:"small",style:{color:a.fats},children:["F: ",Math.round(B.fats),"g"]})]})]}),(0,ce.jsx)(j.default,{style:[xr.divider,{backgroundColor:a.border}]}),(0,ce.jsxs)(j.default,{style:xr.totalsColumn,children:[(0,ce.jsxs)(ge,{type:"small",style:{color:a.textSecondary},children:["Per Serving (",h||1,")"]}),(0,ce.jsx)(ge,{type:"h3",style:{color:a.primary},children:Math.round(R.calories)}),(0,ce.jsx)(ge,{type:"small",style:{color:a.textSecondary},children:"calories"}),(0,ce.jsxs)(j.default,{style:xr.macroList,children:[(0,ce.jsxs)(ge,{type:"small",style:{color:a.protein},children:["P: ",Math.round(R.protein),"g"]}),(0,ce.jsxs)(ge,{type:"small",style:{color:a.carbs},children:["C: ",Math.round(R.carbs),"g"]}),(0,ce.jsxs)(ge,{type:"small",style:{color:a.fats},children:["F: ",Math.round(R.fats),"g"]})]})]})]})]}):null,(0,ce.jsx)(vt,{onPress:()=>{if(!u.trim()||0===x.length)return;const e={name:u.trim(),ingredients:x,totalServings:parseFloat(h)||1};i?l.updateMeal(i,e):l.addMeal(e),r.goBack()},disabled:!u.trim()||0===x.length,children:i?"Update Meal":"Save Meal"})]})}const xr=a.default.create({field:{marginBottom:M},input:{height:V,borderRadius:Y,paddingHorizontal:M,marginTop:A,fontSize:16},ingredientsCard:{marginBottom:M},sectionHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:W},ingredientItem:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingVertical:W,borderBottomWidth:1},ingredientInfo:{flex:1},emptyIngredients:{alignItems:"center",paddingVertical:L},storedFoodsCard:{marginBottom:M},storedFoodsHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},storedFoodsHeaderLeft:{flexDirection:"row",alignItems:"center"},storedFoodsHeaderRight:{flexDirection:"row",alignItems:"center"},storedFoodsContent:{marginTop:W},searchInput:{height:40,borderRadius:X,paddingHorizontal:W,marginBottom:W,fontSize:14},emptyStoredFoods:{alignItems:"center",paddingVertical:M},storedFoodItem:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingVertical:W,borderBottomWidth:1},storedFoodInfo:{flex:1,marginRight:W},addIngredientCard:{marginBottom:M},ingredientRow:{flexDirection:"row",gap:z,marginBottom:W},ingredientField:{flex:1},smallInput:{height:40,borderRadius:X,paddingHorizontal:z,marginTop:A,fontSize:14},nutritionRow:{flexDirection:"row",flexWrap:"wrap",gap:z,marginBottom:W},nutritionField:{width:"18%",flexGrow:1,minWidth:60},nutritionInput:{height:36,borderRadius:X,textAlign:"center",marginTop:A,fontSize:14},addButton:{flexDirection:"row",alignItems:"center",justifyContent:"center",paddingVertical:W,borderRadius:Y},totalsCard:{marginBottom:L},totalsRow:{flexDirection:"row"},totalsColumn:{flex:1,alignItems:"center"},divider:{width:1,marginHorizontal:W},macroList:{flexDirection:"row",gap:z,marginTop:A}});function mr(){const e=(0,d.useSafeAreaInsets)(),t=(0,T.useHeaderHeight)(),r=(0,s.useNavigation)(),{theme:o}=de(),n=Ye();return(0,ce.jsx)(j.default,{style:[pr.container,{backgroundColor:o.backgroundRoot}],children:(0,ce.jsxs)(v.default,{style:pr.scroll,contentContainerStyle:{paddingTop:t+L,paddingBottom:e.bottom+L,paddingHorizontal:M},scrollIndicatorInsets:{bottom:e.bottom},children:[0===n.meals.length?(0,ce.jsxs)(j.default,{style:pr.empty,children:[(0,ce.jsx)(C.default,{name:"book-open",size:48,color:o.textSecondary}),(0,ce.jsx)(ge,{type:"body",style:{color:o.textSecondary,marginTop:W},children:"No meal preps saved yet"}),(0,ce.jsx)(vt,{onPress:()=>r.navigate("MealCreator"),style:{marginTop:L},children:"Create Your First Meal"})]}):n.meals.map(e=>{const t=n.getMealNutritionPerServing(e.id);return(0,ce.jsxs)(fe,{style:pr.mealCard,children:[(0,ce.jsxs)(j.default,{style:pr.mealHeader,children:[(0,ce.jsxs)(j.default,{style:pr.mealInfo,children:[(0,ce.jsx)(ge,{type:"h4",children:e.name}),(0,ce.jsxs)(ge,{type:"small",style:{color:o.textSecondary},children:[e.totalServings," servings - ",e.ingredients.length," ingredients"]})]}),(0,ce.jsxs)(j.default,{style:pr.mealActions,children:[(0,ce.jsx)(he.default,{onPress:()=>{return t=e.id,void r.navigate("MealCreator",{mealId:t});var t},style:pr.iconButton,hitSlop:8,children:(0,ce.jsx)(C.default,{name:"edit-2",size:18,color:o.primary})}),(0,ce.jsx)(he.default,{onPress:()=>{return t=e.id,void n.deleteMeal(t);var t},style:pr.iconButton,hitSlop:8,children:(0,ce.jsx)(C.default,{name:"trash-2",size:18,color:o.error})})]})]}),(0,ce.jsxs)(j.default,{style:[pr.nutritionRow,{borderTopColor:o.border}],children:[(0,ce.jsxs)(j.default,{style:pr.nutritionItem,children:[(0,ce.jsx)(ge,{type:"h4",style:{color:o.primary},children:Math.round(t.calories)}),(0,ce.jsx)(ge,{type:"small",style:{color:o.textSecondary},children:"cal/serving"})]}),(0,ce.jsxs)(j.default,{style:pr.nutritionItem,children:[(0,ce.jsxs)(ge,{type:"body",style:{color:o.protein},children:[Math.round(t.protein),"g"]}),(0,ce.jsx)(ge,{type:"small",style:{color:o.textSecondary},children:"protein"})]}),(0,ce.jsxs)(j.default,{style:pr.nutritionItem,children:[(0,ce.jsxs)(ge,{type:"body",style:{color:o.carbs},children:[Math.round(t.carbs),"g"]}),(0,ce.jsx)(ge,{type:"small",style:{color:o.textSecondary},children:"carbs"})]}),(0,ce.jsxs)(j.default,{style:pr.nutritionItem,children:[(0,ce.jsxs)(ge,{type:"body",style:{color:o.fats},children:[Math.round(t.fats),"g"]}),(0,ce.jsx)(ge,{type:"small",style:{color:o.textSecondary},children:"fats"})]})]}),(0,ce.jsxs)(j.default,{style:pr.ingredientsList,children:[e.ingredients.slice(0,3).map(e=>(0,ce.jsxs)(ge,{type:"small",style:{color:o.textSecondary},children:[e.amount," ",e.unit," ",e.name]},e.id)),e.ingredients.length>3?(0,ce.jsxs)(ge,{type:"small",style:{color:o.textSecondary},children:["+",e.ingredients.length-3," more..."]}):null]})]},e.id)}),n.meals.length>0?(0,ce.jsx)(he.default,{onPress:()=>r.navigate("MealCreator"),style:[pr.secondaryButton,{borderColor:o.primary}],children:(0,ce.jsx)(ge,{type:"body",style:{color:o.primary},children:"Create New Meal"})}):null]})})}const pr=a.default.create({container:{flex:1},scroll:{flex:1},empty:{alignItems:"center",paddingVertical:H},mealCard:{marginBottom:M},mealHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"flex-start"},mealInfo:{flex:1},mealActions:{flexDirection:"row",gap:W},iconButton:{padding:A},nutritionRow:{flexDirection:"row",justifyContent:"space-between",marginTop:W,paddingTop:W,borderTopWidth:1},nutritionItem:{alignItems:"center"},ingredientsList:{marginTop:W},secondaryButton:{height:V,borderRadius:Y,borderWidth:2,alignItems:"center",justifyContent:"center"}});function fr(){const e=(0,d.useSafeAreaInsets)(),t=(0,T.useHeaderHeight)(),r=(0,s.useNavigation)(),o=(0,s.useRoute)(),{theme:a}=de(),l=Ye(),i=o.params?.mealType||"snack",c=(new Date).toISOString().split("T")[0],[u,g]=(0,n.useState)(i),[h,y]=(0,n.useState)(null),[x,m]=(0,n.useState)("1");return(0,ce.jsx)(j.default,{style:[br.container,{backgroundColor:a.backgroundRoot}],children:(0,ce.jsxs)(v.default,{style:br.scroll,contentContainerStyle:{paddingTop:t+L,paddingBottom:e.bottom+L,paddingHorizontal:M},scrollIndicatorInsets:{bottom:e.bottom},children:[(0,ce.jsx)(ge,{type:"body",style:{color:a.textSecondary,marginBottom:W},children:"Select which meal to add to:"}),(0,ce.jsx)(j.default,{style:br.mealTypeSelector,children:["breakfast","lunch","dinner","snack"].map(e=>(0,ce.jsx)(he.default,{onPress:()=>g(e),style:[br.mealTypeButton,{backgroundColor:u===e?a.primary:a.backgroundDefault,borderColor:u===e?a.primary:a.border}],children:(0,ce.jsx)(ge,{type:"small",style:{color:u===e?"#FFF":a.text,fontWeight:u===e?"600":"400"},children:e.charAt(0).toUpperCase()+e.slice(1)})},e))}),(0,ce.jsx)(ge,{type:"body",style:{color:a.textSecondary,marginBottom:M},children:"Select a meal prep to log:"}),0===l.meals.length?(0,ce.jsxs)(j.default,{style:br.empty,children:[(0,ce.jsx)(C.default,{name:"book-open",size:48,color:a.textSecondary}),(0,ce.jsxs)(ge,{type:"body",style:{color:a.textSecondary,marginTop:W,textAlign:"center"},children:["No meal preps available.","\n","Create one first!"]}),(0,ce.jsx)(vt,{onPress:()=>{r.goBack(),r.navigate("MealCreator")},style:{marginTop:L},children:"Create Meal"})]}):(0,ce.jsxs)(ce.Fragment,{children:[l.meals.map(e=>{const t=l.getMealNutritionPerServing(e.id),r=h?.id===e.id;return(0,ce.jsxs)(fe,{onPress:()=>(e=>{y(e),m("1")})(e),style:Object.assign({marginBottom:W},r?{borderColor:a.primary,borderWidth:2}:{}),children:[(0,ce.jsxs)(j.default,{style:br.mealHeader,children:[(0,ce.jsxs)(j.default,{style:br.mealInfo,children:[(0,ce.jsx)(ge,{type:"h4",children:e.name}),(0,ce.jsxs)(ge,{type:"small",style:{color:a.textSecondary},children:[e.totalServings," servings total"]})]}),r?(0,ce.jsx)(C.default,{name:"check-circle",size:24,color:a.primary}):null]}),(0,ce.jsxs)(j.default,{style:[br.nutritionRow,{borderTopColor:a.border}],children:[(0,ce.jsx)(j.default,{style:br.nutritionItem,children:(0,ce.jsxs)(ge,{type:"body",style:{color:a.primary},children:[Math.round(t.calories)," cal"]})}),(0,ce.jsx)(j.default,{style:br.nutritionItem,children:(0,ce.jsxs)(ge,{type:"small",style:{color:a.protein},children:["P: ",Math.round(t.protein),"g"]})}),(0,ce.jsx)(j.default,{style:br.nutritionItem,children:(0,ce.jsxs)(ge,{type:"small",style:{color:a.carbs},children:["C: ",Math.round(t.carbs),"g"]})}),(0,ce.jsx)(j.default,{style:br.nutritionItem,children:(0,ce.jsxs)(ge,{type:"small",style:{color:a.fats},children:["F: ",Math.round(t.fats),"g"]})})]})]},e.id)}),h?(0,ce.jsxs)(fe,{style:br.logCard,children:[(0,ce.jsxs)(ge,{type:"h4",style:{marginBottom:W},children:['Log "',h.name,'"']}),(0,ce.jsxs)(j.default,{style:br.servingsRow,children:[(0,ce.jsx)(ge,{type:"body",children:"Servings to log:"}),(0,ce.jsx)(bt.default,{value:x,onChangeText:m,keyboardType:"decimal-pad",style:[br.servingsInput,{backgroundColor:a.backgroundDefault,color:a.text}]})]}),(0,ce.jsxs)(j.default,{style:[br.previewRow,{backgroundColor:a.backgroundDefault}],children:[(0,ce.jsx)(ge,{type:"small",style:{color:a.textSecondary},children:"This will add:"}),(0,ce.jsx)(j.default,{style:br.previewNutrition,children:(()=>{const e=l.getMealNutritionPerServing(h.id),t=parseFloat(x)||1;return(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsxs)(ge,{type:"body",style:{color:a.primary},children:[Math.round(e.calories*t)," cal"]}),(0,ce.jsxs)(ge,{type:"small",style:{color:a.protein},children:["P: ",Math.round(e.protein*t),"g"]}),(0,ce.jsxs)(ge,{type:"small",style:{color:a.carbs},children:["C: ",Math.round(e.carbs*t),"g"]}),(0,ce.jsxs)(ge,{type:"small",style:{color:a.fats},children:["F: ",Math.round(e.fats*t),"g"]})]})})()})]}),(0,ce.jsxs)(vt,{onPress:()=>{h&&(l.logMealAsFood(h.id,parseFloat(x)||1,u,c),r.goBack())},children:["Add to ",u.charAt(0).toUpperCase()+u.slice(1)]})]}):null]})]})})}const br=a.default.create({container:{flex:1},scroll:{flex:1},mealTypeSelector:{flexDirection:"row",flexWrap:"wrap",gap:z,marginBottom:L},mealTypeButton:{paddingHorizontal:W,paddingVertical:z,borderRadius:K,borderWidth:1},empty:{alignItems:"center",paddingVertical:H},mealCard:{marginBottom:W},selectedCard:{borderWidth:2},mealHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},mealInfo:{flex:1},nutritionRow:{flexDirection:"row",justifyContent:"space-between",marginTop:W,paddingTop:W,borderTopWidth:1},nutritionItem:{alignItems:"center"},logCard:{marginTop:M},servingsRow:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginBottom:M},servingsInput:{width:80,height:40,borderRadius:X,textAlign:"center",fontSize:16},previewRow:{padding:W,borderRadius:Y,marginBottom:M},previewNutrition:{flexDirection:"row",justifyContent:"space-between",marginTop:z}});function jr(){const e=(0,d.useSafeAreaInsets)(),t=(0,T.useHeaderHeight)(),r=(0,s.useNavigation)(),o=(0,s.useRoute)(),{theme:a}=de(),l=Ye(),i=o.params?.foodId,c=l.foods.find(e=>e.id===i),[u,g]=(0,n.useState)({name:"",servingSize:"",calories:"",protein:"",carbs:"",fats:"",fiber:""});(0,n.useEffect)(()=>{c&&g({name:c.name,servingSize:c.servingSize,calories:String(c.calories),protein:String(c.protein),carbs:String(c.carbs),fats:String(c.fats),fiber:String(c.fiber)})},[c]);return c?(0,ce.jsxs)(wt,{style:{flex:1,backgroundColor:a.backgroundRoot},contentContainerStyle:{paddingTop:t+L,paddingBottom:e.bottom+L,paddingHorizontal:M},children:[(0,ce.jsxs)(j.default,{style:wr.field,children:[(0,ce.jsx)(ge,{type:"small",style:{color:a.textSecondary},children:"Food Name *"}),(0,ce.jsx)(bt.default,{value:u.name,onChangeText:e=>g(Object.assign({},u,{name:e})),placeholder:"e.g., Chicken Breast",placeholderTextColor:a.textSecondary,style:[wr.input,{backgroundColor:a.backgroundDefault,color:a.text}]})]}),(0,ce.jsxs)(j.default,{style:wr.field,children:[(0,ce.jsx)(ge,{type:"small",style:{color:a.textSecondary},children:"Serving Size"}),(0,ce.jsx)(bt.default,{value:u.servingSize,onChangeText:e=>g(Object.assign({},u,{servingSize:e})),placeholder:"e.g., 100g or 1 cup",placeholderTextColor:a.textSecondary,style:[wr.input,{backgroundColor:a.backgroundDefault,color:a.text}]})]}),(0,ce.jsxs)(fe,{style:wr.nutritionCard,children:[(0,ce.jsx)(ge,{type:"h4",style:wr.nutritionTitle,children:"Nutrition Facts"}),(0,ce.jsxs)(j.default,{style:wr.nutritionGrid,children:[(0,ce.jsxs)(j.default,{style:wr.nutritionField,children:[(0,ce.jsx)(ge,{type:"small",style:{color:a.textSecondary},children:"Calories"}),(0,ce.jsx)(bt.default,{value:u.calories,onChangeText:e=>g(Object.assign({},u,{calories:e})),keyboardType:"decimal-pad",placeholder:"0",placeholderTextColor:a.textSecondary,style:[wr.nutritionInput,{backgroundColor:a.backgroundSecondary,color:a.text}]})]}),(0,ce.jsxs)(j.default,{style:wr.nutritionField,children:[(0,ce.jsx)(ge,{type:"small",style:{color:a.protein},children:"Protein (g)"}),(0,ce.jsx)(bt.default,{value:u.protein,onChangeText:e=>g(Object.assign({},u,{protein:e})),keyboardType:"decimal-pad",placeholder:"0",placeholderTextColor:a.textSecondary,style:[wr.nutritionInput,{backgroundColor:a.backgroundSecondary,color:a.text}]})]}),(0,ce.jsxs)(j.default,{style:wr.nutritionField,children:[(0,ce.jsx)(ge,{type:"small",style:{color:a.carbs},children:"Carbs (g)"}),(0,ce.jsx)(bt.default,{value:u.carbs,onChangeText:e=>g(Object.assign({},u,{carbs:e})),keyboardType:"decimal-pad",placeholder:"0",placeholderTextColor:a.textSecondary,style:[wr.nutritionInput,{backgroundColor:a.backgroundSecondary,color:a.text}]})]}),(0,ce.jsxs)(j.default,{style:wr.nutritionField,children:[(0,ce.jsx)(ge,{type:"small",style:{color:a.fats},children:"Fats (g)"}),(0,ce.jsx)(bt.default,{value:u.fats,onChangeText:e=>g(Object.assign({},u,{fats:e})),keyboardType:"decimal-pad",placeholder:"0",placeholderTextColor:a.textSecondary,style:[wr.nutritionInput,{backgroundColor:a.backgroundSecondary,color:a.text}]})]}),(0,ce.jsxs)(j.default,{style:wr.nutritionField,children:[(0,ce.jsx)(ge,{type:"small",style:{color:a.textSecondary},children:"Fiber (g)"}),(0,ce.jsx)(bt.default,{value:u.fiber,onChangeText:e=>g(Object.assign({},u,{fiber:e})),keyboardType:"decimal-pad",placeholder:"0",placeholderTextColor:a.textSecondary,style:[wr.nutritionInput,{backgroundColor:a.backgroundSecondary,color:a.text}]})]})]})]}),(0,ce.jsx)(vt,{onPress:()=>{i&&u.name.trim()&&(l.updateFood(i,{name:u.name.trim(),servingSize:u.servingSize||"1 serving",calories:parseFloat(u.calories)||0,protein:parseFloat(u.protein)||0,carbs:parseFloat(u.carbs)||0,fats:parseFloat(u.fats)||0,fiber:parseFloat(u.fiber)||0}),r.goBack())},disabled:!u.name.trim(),children:"Save Changes"})]}):(0,ce.jsx)(j.default,{style:[wr.container,{backgroundColor:a.backgroundRoot}],children:(0,ce.jsx)(ge,{type:"body",style:{textAlign:"center"},children:"Food not found"})})}const wr=a.default.create({container:{flex:1,justifyContent:"center",alignItems:"center"},field:{marginBottom:M},input:{height:V,borderRadius:Y,paddingHorizontal:M,marginTop:A,fontSize:16},nutritionCard:{marginBottom:M},nutritionTitle:{marginBottom:W},nutritionGrid:{flexDirection:"row",flexWrap:"wrap",gap:W},nutritionField:{width:"30%",flexGrow:1},nutritionInput:{height:40,borderRadius:X,textAlign:"center",marginTop:A,fontSize:16}}),Sr=(0,w.createNativeStackNavigator)();function Cr(){const e=st();return(0,ce.jsxs)(Sr.Navigator,{screenOptions:e,children:[(0,ce.jsx)(Sr.Screen,{name:"Nutrition",component:ar,options:{headerTitle:"Nutrition"}}),(0,ce.jsx)(Sr.Screen,{name:"AddFood",component:lr,options:{headerTitle:"Add Food",presentation:"modal"}}),(0,ce.jsx)(Sr.Screen,{name:"FoodDatabase",component:dr,options:{headerTitle:"My Foods"}}),(0,ce.jsx)(Sr.Screen,{name:"ScanNutrition",component:gr,options:{headerShown:!1,presentation:"fullScreenModal"}}),(0,ce.jsx)(Sr.Screen,{name:"MealCreator",component:yr,options:{headerTitle:"Create Meal",presentation:"modal"}}),(0,ce.jsx)(Sr.Screen,{name:"MyMeals",component:mr,options:{headerTitle:"My Meals"}}),(0,ce.jsx)(Sr.Screen,{name:"LogMeal",component:fr,options:{headerTitle:"Log Meal",presentation:"modal"}}),(0,ce.jsx)(Sr.Screen,{name:"EditFood",component:jr,options:{headerTitle:"Edit Food",presentation:"modal"}})]})}var kr=r(8264);function vr({data:e,color:t,height:r=150,showDots:o=!0,showLabels:a=!0,title:s,unit:l=""}){const{theme:i}=de(),d=t||i.primary,c=Ie.default.get("window").width-2*M-2*L,{path:u,dots:g,minValue:h,maxValue:y}=(0,n.useMemo)(()=>{if(0===e.length)return{path:"",dots:[],minValue:0,maxValue:100};const t=e.map(e=>e.value),o=Math.min(...t),n=Math.max(...t),a=n-o||1,s=o-.1*a,l=n+.1*a,i=l-s,d=20,u=10,g=c-u-10,h=r-d-30,y=e.map((t,r)=>({x:u+r/(e.length-1||1)*g,y:d+h-(t.value-s)/i*h,value:t.value,label:t.label||t.date.slice(5)}));let x="";if(y.length>0){x=`M ${y[0].x} ${y[0].y}`;for(let e=1;e<y.length;e++){const t=y[e-1],r=y[e],o=(t.x+r.x)/2;x+=` C ${o} ${t.y}, ${o} ${r.y}, ${r.x} ${r.y}`}}return{path:x,dots:y,minValue:Math.round(s),maxValue:Math.round(l)}},[e,c,r]);return 0===e.length?(0,ce.jsx)(j.default,{style:[Tr.container,{height:r}],children:(0,ce.jsx)(j.default,{style:Tr.emptyState,children:(0,ce.jsx)(ge,{type:"body",style:{color:i.textSecondary},children:"No data available"})})}):(0,ce.jsxs)(j.default,{style:Tr.container,children:[s?(0,ce.jsx)(ge,{type:"h4",style:{marginBottom:W},children:s}):null,(0,ce.jsx)(j.default,{style:[Tr.graphContainer,{height:r}],children:(0,ce.jsxs)(Zt.default,{width:c,height:r,children:[(0,ce.jsx)(Zt.Line,{x1:10,y1:r-30,x2:c-10,y2:r-30,stroke:i.border,strokeWidth:1}),(0,ce.jsx)(Zt.Path,{d:u,stroke:d,strokeWidth:2.5,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),o&&g.map((e,t)=>(0,ce.jsx)(Zt.Circle,{cx:e.x,cy:e.y,r:4,fill:d,stroke:i.backgroundRoot,strokeWidth:2},t)),a&&g.map((e,t)=>g.length<=7||0===t||t===g.length-1||t%Math.ceil(g.length/7)===0?(0,ce.jsx)(Zt.Text,{x:e.x,y:r-10,fontSize:10,fill:i.textSecondary,textAnchor:"middle",children:e.label},`label-${t}`):null)]})}),(0,ce.jsxs)(j.default,{style:Tr.legend,children:[(0,ce.jsxs)(ge,{type:"small",style:{color:i.textSecondary},children:[h,l]}),(0,ce.jsxs)(ge,{type:"small",style:{color:i.textSecondary},children:[y,l]})]})]})}const Tr=a.default.create({container:{width:"100%"},graphContainer:{width:"100%"},emptyState:{flex:1,justifyContent:"center",alignItems:"center"},legend:{flexDirection:"row",justifyContent:"space-between",paddingHorizontal:z,marginTop:A}}),Ir=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Fr=["January","February","March","April","May","June","July","August","September","October","November","December"];function Dr(){const{theme:e,isDark:t}=de(),r=(0,T.useHeaderHeight)(),o=(0,S.useBottomTabBarHeight)(),l=(0,s.useNavigation)(),i=Ye(),[d,c]=(0,n.useState)(new Date),[u,g]=(0,n.useState)(null),[h,y]=(0,n.useState)(!1),x=(0,n.useMemo)(()=>{const e=d.getFullYear(),t=d.getMonth(),r=new Date(e,t,1).getDay(),o=new Date(e,t+1,0).getDate(),n=[];for(let a=0;a<r;a++)n.push(null);for(let a=1;a<=o;a++){const r=`${e}-${String(t+1).padStart(2,"0")}-${String(a).padStart(2,"0")}`,o=i.workoutLogs.filter(e=>new Date(e.completedAt).toISOString().split("T")[0]===r),s=i.getDailyNutrition(r);n.push({date:r,workouts:o,nutrition:s,hasWorkout:o.length>0,hasNutrition:s.calories>0})}return n},[d,i.workoutLogs,i.foodEntries]),m=(0,n.useMemo)(()=>u&&x.find(e=>e?.date===u)||null,[u,x]),p=(0,n.useMemo)(()=>{const e=[],t=new Date;for(let r=13;r>=0;r--){const o=new Date(t);o.setDate(o.getDate()-r);const n=o.toISOString().split("T")[0],a=i.getDailyNutrition(n);a.calories>0&&e.push({date:n,value:Math.round(a.calories),label:`${o.getMonth()+1}/${o.getDate()}`})}return e},[i.foodEntries]),f=(0,n.useMemo)(()=>{if(!m?.workouts.length)return[];const e=[];return m.workouts.forEach(t=>{t.exerciseLogs.forEach(t=>{const r=i.workoutLogs.filter(e=>new Date(e.completedAt).toISOString().split("T")[0]<u).flatMap(e=>e.exerciseLogs).filter(e=>e.name===t.name),o=Math.max(...t.sets.filter(e=>e.completed).map(e=>e.weight),0),n=r.length>0?Math.max(...r.flatMap(e=>e.sets.filter(e=>e.completed).map(e=>e.weight)),0):0;e.push({exerciseName:t.name,currentMax:o,previousMax:n,improvement:n>0?(o-n)/n*100:0,sets:t.sets.filter(e=>e.completed)})})}),e},[m,i.workoutLogs,u]),b=e=>{c(t=>{const r=new Date(t);return r.setMonth(r.getMonth()+e),r})},w=(new Date).toISOString().split("T")[0],k=a.default.create({container:{flex:1},content:{paddingTop:r+M,paddingBottom:o+L,paddingHorizontal:M},monthHeader:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginBottom:L},monthTitle:Object.assign({},ee,{color:e.text}),navButton:{padding:z},weekHeader:{flexDirection:"row",marginBottom:z},weekDay:Object.assign({flex:1,textAlign:"center"},ae,{color:e.textSecondary}),calendarGrid:{flexDirection:"row",flexWrap:"wrap"},dayCell:{width:"14.28%",aspectRatio:1,padding:2},dayInner:{flex:1,borderRadius:X,alignItems:"center",justifyContent:"center",backgroundColor:e.backgroundSecondary},dayInnerToday:{borderWidth:2,borderColor:e.primary},dayInnerSelected:{backgroundColor:e.primary},dayNumber:Object.assign({},oe,{color:e.text}),dayNumberSelected:{color:"#FFFFFF"},indicators:{flexDirection:"row",marginTop:2},indicator:{width:6,height:6,borderRadius:3,marginHorizontal:1},workoutIndicator:{backgroundColor:P.light.primary},nutritionIndicator:{backgroundColor:P.light.carbs},emptyDay:{backgroundColor:"transparent"},legendContainer:{flexDirection:"row",justifyContent:"center",marginTop:L,gap:M},legendItem:{flexDirection:"row",alignItems:"center",gap:A},legendDot:{width:10,height:10,borderRadius:5},legendText:Object.assign({},ne,{color:e.textSecondary}),trendsCard:{marginTop:L},modalOverlay:{flex:1,backgroundColor:"rgba(0,0,0,0.5)",justifyContent:"flex-end"},modalContent:{backgroundColor:e.backgroundRoot,borderTopLeftRadius:q,borderTopRightRadius:q,maxHeight:"80%",paddingBottom:H},modalHeader:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",padding:M,borderBottomWidth:1,borderBottomColor:e.border},modalTitle:Object.assign({},te,{color:e.text}),closeButton:{padding:z},modalScroll:{padding:M},section:{marginBottom:L},sectionTitle:Object.assign({},re,{color:e.text,marginBottom:W}),workoutCard:{marginBottom:W},workoutName:Object.assign({},oe,{fontWeight:"600",color:e.text,marginBottom:z}),workoutDuration:Object.assign({},ne,{color:e.textSecondary}),exerciseItem:{marginTop:W,paddingTop:W,borderTopWidth:1,borderTopColor:e.border},exerciseHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:A},exerciseName:Object.assign({},oe,{color:e.text,flex:1}),exerciseStats:{flexDirection:"row",gap:M},statItem:{alignItems:"center"},statValue:Object.assign({},re,{color:e.primary}),statLabel:Object.assign({},ae,{color:e.textSecondary}),improvementBadge:{flexDirection:"row",alignItems:"center",backgroundColor:e.primary+"20",paddingHorizontal:z,paddingVertical:A,borderRadius:K,alignSelf:"flex-start",marginTop:z},improvementText:Object.assign({},ne,{color:e.primary,fontWeight:"600",marginLeft:A}),nutritionSummary:{gap:W},nutritionRow:{flexDirection:"row",justifyContent:"space-between",alignItems:"center"},nutritionLabel:Object.assign({},oe,{color:e.text}),nutritionValue:Object.assign({},oe,{fontWeight:"600",color:e.text}),macroRow:{flexDirection:"row",gap:W,marginTop:W},macroItem:{flex:1},macroLabel:Object.assign({},ae,{color:e.textSecondary,marginBottom:A}),macroValue:Object.assign({},oe,{fontWeight:"600"}),emptyState:{alignItems:"center",padding:L},emptyText:Object.assign({},oe,{color:e.textSecondary,marginTop:W}),setsList:{flexDirection:"row",flexWrap:"wrap",gap:z,marginTop:z},setChip:{backgroundColor:e.backgroundTertiary,paddingHorizontal:z,paddingVertical:A,borderRadius:X},setChipText:Object.assign({},ne,{color:e.text})});return(0,ce.jsxs)(Lt,{style:k.container,children:[(0,ce.jsxs)(v.default,{contentContainerStyle:k.content,showsVerticalScrollIndicator:!1,children:[(0,ce.jsxs)(j.default,{style:k.monthHeader,children:[(0,ce.jsx)(he.default,{style:k.navButton,onPress:()=>b(-1),children:(0,ce.jsx)(C.default,{name:"chevron-left",size:24,color:e.text})}),(0,ce.jsxs)(F.default,{style:k.monthTitle,children:[Fr[d.getMonth()]," ",d.getFullYear()]}),(0,ce.jsx)(he.default,{style:k.navButton,onPress:()=>b(1),children:(0,ce.jsx)(C.default,{name:"chevron-right",size:24,color:e.text})})]}),(0,ce.jsx)(j.default,{style:k.weekHeader,children:Ir.map(e=>(0,ce.jsx)(F.default,{style:k.weekDay,children:e},e))}),(0,ce.jsx)(j.default,{style:k.calendarGrid,children:x.map((e,t)=>(0,ce.jsx)(j.default,{style:k.dayCell,children:e?(0,ce.jsxs)(he.default,{style:[k.dayInner,e.date===w&&k.dayInnerToday,e.date===u&&k.dayInnerSelected],onPress:()=>{return t=e.date,g(t),void y(!0);var t},children:[(0,ce.jsx)(F.default,{style:[k.dayNumber,e.date===u&&k.dayNumberSelected],children:parseInt(e.date.split("-")[2])}),(0,ce.jsxs)(j.default,{style:k.indicators,children:[e.hasWorkout&&(0,ce.jsx)(j.default,{style:[k.indicator,k.workoutIndicator]}),e.hasNutrition&&(0,ce.jsx)(j.default,{style:[k.indicator,k.nutritionIndicator]})]})]}):(0,ce.jsx)(j.default,{style:[k.dayInner,k.emptyDay]})},t))}),(0,ce.jsxs)(j.default,{style:k.legendContainer,children:[(0,ce.jsxs)(j.default,{style:k.legendItem,children:[(0,ce.jsx)(j.default,{style:[k.legendDot,k.workoutIndicator]}),(0,ce.jsx)(F.default,{style:k.legendText,children:"Workout"})]}),(0,ce.jsxs)(j.default,{style:k.legendItem,children:[(0,ce.jsx)(j.default,{style:[k.legendDot,k.nutritionIndicator]}),(0,ce.jsx)(F.default,{style:k.legendText,children:"Nutrition"})]})]}),p.length>=2?(0,ce.jsxs)(fe,{style:k.trendsCard,children:[(0,ce.jsx)(ge,{type:"h4",style:{marginBottom:W},children:"Calorie Trends (Last 14 Days)"}),(0,ce.jsx)(vr,{data:p,color:e.primary,height:150,showDots:!0,showLabels:!0,unit:" cal"})]}):null]}),(0,ce.jsx)(kr.default,{visible:h,animationType:"slide",transparent:!0,onRequestClose:()=>y(!1),children:(0,ce.jsx)(j.default,{style:k.modalOverlay,children:(0,ce.jsxs)(j.default,{style:k.modalContent,children:[(0,ce.jsxs)(j.default,{style:k.modalHeader,children:[(0,ce.jsx)(F.default,{style:k.modalTitle,children:u?(I=u,new Date(I).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})):""}),(0,ce.jsx)(he.default,{style:k.closeButton,onPress:()=>y(!1),children:(0,ce.jsx)(C.default,{name:"x",size:24,color:e.text})})]}),(0,ce.jsxs)(v.default,{style:k.modalScroll,children:[m?.hasWorkout&&(0,ce.jsxs)(j.default,{style:k.section,children:[(0,ce.jsx)(F.default,{style:k.sectionTitle,children:"Workouts"}),m.workouts.map((t,r)=>(0,ce.jsxs)(fe,{style:k.workoutCard,children:[(0,ce.jsx)(F.default,{style:k.workoutName,children:t.workoutName}),(0,ce.jsxs)(F.default,{style:k.workoutDuration,children:[t.duration," min"]}),f.map((t,r)=>(0,ce.jsxs)(he.default,{style:k.exerciseItem,onPress:()=>{return e=t.exerciseName,y(!1),void l.navigate("ExerciseProgress",{exerciseName:e});var e},children:[(0,ce.jsxs)(j.default,{style:k.exerciseHeader,children:[(0,ce.jsx)(F.default,{style:k.exerciseName,children:t.exerciseName}),(0,ce.jsx)(C.default,{name:"chevron-right",size:20,color:e.textSecondary})]}),(0,ce.jsxs)(j.default,{style:k.exerciseStats,children:[(0,ce.jsxs)(j.default,{style:k.statItem,children:[(0,ce.jsx)(F.default,{style:k.statValue,children:t.currentMax}),(0,ce.jsx)(F.default,{style:k.statLabel,children:"MAX LBS"})]}),(0,ce.jsxs)(j.default,{style:k.statItem,children:[(0,ce.jsx)(F.default,{style:k.statValue,children:t.sets.length}),(0,ce.jsx)(F.default,{style:k.statLabel,children:"SETS"})]}),(0,ce.jsxs)(j.default,{style:k.statItem,children:[(0,ce.jsx)(F.default,{style:k.statValue,children:t.sets.reduce((e,t)=>e+t.reps,0)}),(0,ce.jsx)(F.default,{style:k.statLabel,children:"TOTAL REPS"})]})]}),t.improvement>0&&(0,ce.jsxs)(j.default,{style:k.improvementBadge,children:[(0,ce.jsx)(C.default,{name:"trending-up",size:14,color:e.primary}),(0,ce.jsxs)(F.default,{style:k.improvementText,children:["+",t.improvement.toFixed(1),"% from previous"]})]}),(0,ce.jsx)(j.default,{style:k.setsList,children:t.sets.map((e,t)=>(0,ce.jsx)(j.default,{style:k.setChip,children:(0,ce.jsxs)(F.default,{style:k.setChipText,children:[e.weight,"lb x ",e.reps]})},t))})]},r))]},r))]}),m?.hasNutrition&&(0,ce.jsxs)(j.default,{style:k.section,children:[(0,ce.jsx)(F.default,{style:k.sectionTitle,children:"Nutrition"}),(0,ce.jsx)(fe,{children:(0,ce.jsxs)(j.default,{style:k.nutritionSummary,children:[(0,ce.jsxs)(j.default,{style:k.nutritionRow,children:[(0,ce.jsx)(F.default,{style:k.nutritionLabel,children:"Calories"}),(0,ce.jsxs)(F.default,{style:k.nutritionValue,children:[Math.round(m.nutrition.calories)," kcal"]})]}),(0,ce.jsx)(Ce,{progress:Math.min(1,m.nutrition.calories/(i.profile.goals?.dailyCalories||2e3)),color:e.primary}),(0,ce.jsxs)(j.default,{style:k.macroRow,children:[(0,ce.jsxs)(j.default,{style:k.macroItem,children:[(0,ce.jsx)(F.default,{style:k.macroLabel,children:"PROTEIN"}),(0,ce.jsxs)(F.default,{style:[k.macroValue,{color:e.protein}],children:[Math.round(m.nutrition.protein),"g"]}),(0,ce.jsx)(Ce,{progress:Math.min(1,m.nutrition.protein/(i.profile.goals?.dailyProtein||150)),color:e.protein})]}),(0,ce.jsxs)(j.default,{style:k.macroItem,children:[(0,ce.jsx)(F.default,{style:k.macroLabel,children:"CARBS"}),(0,ce.jsxs)(F.default,{style:[k.macroValue,{color:e.carbs}],children:[Math.round(m.nutrition.carbs),"g"]}),(0,ce.jsx)(Ce,{progress:Math.min(1,m.nutrition.carbs/(i.profile.goals?.dailyCarbs||250)),color:e.carbs})]}),(0,ce.jsxs)(j.default,{style:k.macroItem,children:[(0,ce.jsx)(F.default,{style:k.macroLabel,children:"FATS"}),(0,ce.jsxs)(F.default,{style:[k.macroValue,{color:e.fats}],children:[Math.round(m.nutrition.fats),"g"]}),(0,ce.jsx)(Ce,{progress:Math.min(1,m.nutrition.fats/(i.profile.goals?.dailyFats||65)),color:e.fats})]})]})]})})]}),!m?.hasWorkout&&!m?.hasNutrition&&(0,ce.jsxs)(j.default,{style:k.emptyState,children:[(0,ce.jsx)(C.default,{name:"calendar",size:48,color:e.textSecondary}),(0,ce.jsx)(F.default,{style:k.emptyText,children:"No activity logged for this day"})]})]})]})})})]});var I}const Br=Ie.default.get("window").width;function Rr(){const{theme:e}=de(),t=(0,T.useHeaderHeight)(),r=(0,d.useSafeAreaInsets)(),o=(0,s.useRoute)(),{exerciseName:l}=o.params,i=Ye(),c=(0,n.useMemo)(()=>i.workoutLogs.flatMap(e=>e.exerciseLogs.filter(e=>e.name===l).map(t=>({date:new Date(e.completedAt).toISOString().split("T")[0],completedAt:e.completedAt,sets:t.sets.filter(e=>e.completed)}))).sort((e,t)=>new Date(e.completedAt).getTime()-new Date(t.completedAt).getTime()).map(e=>({date:e.date,maxWeight:Math.max(...e.sets.map(e=>e.weight),0),totalVolume:e.sets.reduce((e,t)=>e+t.weight*t.reps,0),avgReps:e.sets.length>0?Math.round(e.sets.reduce((e,t)=>e+t.reps,0)/e.sets.length):0,totalSets:e.sets.length,totalReps:e.sets.reduce((e,t)=>e+t.reps,0)})),[l,i.workoutLogs]),u=(0,n.useMemo)(()=>{const e=i.workoutLogs.flatMap(e=>e.exerciseLogs.filter(e=>e.name===l));if(0===e.length)return!1;if(e.some(e=>!0===e.isBodyweight))return!0;return c.map(e=>e.maxWeight).every(e=>0===e)},[l,i.workoutLogs,c]),g=(0,n.useMemo)(()=>{if(0===c.length)return{currentMax:0,startMax:0,improvement:0,totalSessions:0,currentReps:0,startReps:0,repsImprovement:0};const e=c[c.length-1].maxWeight,t=c[0].maxWeight,r=t>0?(e-t)/t*100:0,o=c[c.length-1].totalReps,n=c[0].totalReps,a=n>0?(o-n)/n*100:0;return{currentMax:e,startMax:t,improvement:r,totalSessions:c.length,currentReps:o,startReps:n,repsImprovement:a}},[c]),h=(t,r,o,n)=>{if(0===t.length)return null;const a=Math.max(...t),s=Math.min(...t),l=a-s||1,i=Br-2*M-2*M,d=t.map((e,r)=>({x:r/(t.length-1||1)*(i-80)+40,y:200-(e-s)/l*160-20,value:e}));return(0,ce.jsxs)(fe,{style:y.chartCard,children:[(0,ce.jsx)(F.default,{style:[y.chartLabel,{color:e.text}],children:o}),(0,ce.jsxs)(j.default,{style:y.chartContainer,children:[(0,ce.jsxs)(j.default,{style:y.yAxis,children:[(0,ce.jsxs)(F.default,{style:[y.axisText,{color:e.textSecondary}],children:[a,n]}),(0,ce.jsxs)(F.default,{style:[y.axisText,{color:e.textSecondary}],children:[s,n]})]}),(0,ce.jsxs)(j.default,{style:[y.chart,{height:200}],children:[d.map((e,t)=>(0,ce.jsx)(j.default,{style:[y.dataPoint,{left:e.x-6,top:e.y-6,backgroundColor:r}]},t)),d.length>1&&(0,ce.jsx)(j.default,{style:y.lineContainer,children:d.slice(0,-1).map((e,t)=>{const o=d[t+1],n=o.x-e.x,a=o.y-e.y,s=Math.sqrt(n*n+a*a),l=Math.atan2(a,n)*(180/Math.PI);return(0,ce.jsx)(j.default,{style:[y.line,{left:e.x,top:e.y,width:s,backgroundColor:r,transform:[{rotate:`${l}deg`}]}]},t)})})]})]}),(0,ce.jsx)(j.default,{style:y.xAxisLabels,children:c.length>0&&(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsx)(F.default,{style:[y.axisText,{color:e.textSecondary}],children:new Date(c[0].date).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),(0,ce.jsx)(F.default,{style:[y.axisText,{color:e.textSecondary}],children:new Date(c[c.length-1].date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]})})]})},y=a.default.create({container:{flex:1},content:{paddingTop:t+M,paddingBottom:r.bottom+L,paddingHorizontal:M},header:{marginBottom:L},exerciseName:Object.assign({},ee,{color:e.text,marginBottom:z}),sessionsText:Object.assign({},oe,{color:e.textSecondary}),statsRow:{flexDirection:"row",gap:W,marginBottom:L},statCard:{flex:1,alignItems:"center",padding:M},statValue:Object.assign({},ee,{color:e.primary,marginBottom:A}),statLabel:Object.assign({},ae,{color:e.textSecondary,textAlign:"center"}),improvementBadge:{flexDirection:"row",alignItems:"center",backgroundColor:g.improvement>=0?e.primary+"20":e.error+"20",paddingHorizontal:z,paddingVertical:A,borderRadius:K,marginTop:z},improvementText:Object.assign({},ne,{color:g.improvement>=0?e.primary:e.error,fontWeight:"600",marginLeft:A}),chartCard:{marginBottom:M,padding:M},chartLabel:Object.assign({},re,{marginBottom:W}),chartContainer:{flexDirection:"row"},yAxis:{justifyContent:"space-between",paddingVertical:10,marginRight:z},chart:{flex:1,position:"relative"},dataPoint:{position:"absolute",width:12,height:12,borderRadius:6},lineContainer:{position:"absolute",left:0,top:0,right:0,bottom:0},line:{position:"absolute",height:2,transformOrigin:"left center"},xAxisLabels:{flexDirection:"row",justifyContent:"space-between",paddingHorizontal:40,marginTop:z},axisText:Object.assign({},ae),emptyState:{alignItems:"center",padding:H},emptyText:Object.assign({},oe,{color:e.textSecondary,marginTop:W,textAlign:"center"}),historySection:{marginTop:M},sectionTitle:Object.assign({},re,{color:e.text,marginBottom:W}),historyItem:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingVertical:W,borderBottomWidth:1,borderBottomColor:e.border},historyDate:Object.assign({},oe,{color:e.text}),historyStats:{flexDirection:"row",gap:M},historyStat:{alignItems:"flex-end"},historyValue:Object.assign({},oe,{fontWeight:"600",color:e.text}),historyLabel:Object.assign({},ae,{color:e.textSecondary})});return 0===c.length?(0,ce.jsx)(Lt,{style:y.container,children:(0,ce.jsx)(v.default,{contentContainerStyle:y.content,children:(0,ce.jsxs)(j.default,{style:y.emptyState,children:[(0,ce.jsx)(C.default,{name:"trending-up",size:48,color:e.textSecondary}),(0,ce.jsxs)(F.default,{style:y.emptyText,children:["No progress data yet for ",l,".","\n","Complete some workouts to track your progress!"]})]})})}):(0,ce.jsx)(Lt,{style:y.container,children:(0,ce.jsxs)(v.default,{contentContainerStyle:y.content,showsVerticalScrollIndicator:!1,children:[(0,ce.jsxs)(j.default,{style:y.header,children:[(0,ce.jsx)(F.default,{style:y.exerciseName,children:l}),(0,ce.jsxs)(F.default,{style:y.sessionsText,children:[g.totalSessions," workout",1!==g.totalSessions?"s":""," logged"]})]}),u?(0,ce.jsxs)(j.default,{style:y.statsRow,children:[(0,ce.jsxs)(fe,{style:y.statCard,children:[(0,ce.jsx)(F.default,{style:y.statValue,children:g.currentReps}),(0,ce.jsx)(F.default,{style:y.statLabel,children:"CURRENT REPS"})]}),(0,ce.jsxs)(fe,{style:y.statCard,children:[(0,ce.jsx)(F.default,{style:y.statValue,children:g.startReps}),(0,ce.jsx)(F.default,{style:y.statLabel,children:"STARTING REPS"}),0!==g.repsImprovement&&(0,ce.jsxs)(j.default,{style:y.improvementBadge,children:[(0,ce.jsx)(C.default,{name:g.repsImprovement>=0?"trending-up":"trending-down",size:14,color:g.repsImprovement>=0?e.primary:e.error}),(0,ce.jsxs)(F.default,{style:y.improvementText,children:[g.repsImprovement>=0?"+":"",g.repsImprovement.toFixed(1),"%"]})]})]})]}):(0,ce.jsxs)(j.default,{style:y.statsRow,children:[(0,ce.jsxs)(fe,{style:y.statCard,children:[(0,ce.jsx)(F.default,{style:y.statValue,children:g.currentMax}),(0,ce.jsx)(F.default,{style:y.statLabel,children:"CURRENT MAX (LBS)"})]}),(0,ce.jsxs)(fe,{style:y.statCard,children:[(0,ce.jsx)(F.default,{style:y.statValue,children:g.startMax}),(0,ce.jsx)(F.default,{style:y.statLabel,children:"STARTING (LBS)"}),0!==g.improvement&&(0,ce.jsxs)(j.default,{style:y.improvementBadge,children:[(0,ce.jsx)(C.default,{name:g.improvement>=0?"trending-up":"trending-down",size:14,color:g.improvement>=0?e.primary:e.error}),(0,ce.jsxs)(F.default,{style:y.improvementText,children:[g.improvement>=0?"+":"",g.improvement.toFixed(1),"%"]})]})]})]}),u?(0,ce.jsxs)(ce.Fragment,{children:[h(c.map(e=>e.totalReps),e.primary,"Total Reps",""),h(c.map(e=>e.totalSets),e.carbs,"Total Sets","")]}):(0,ce.jsxs)(ce.Fragment,{children:[h(c.map(e=>e.maxWeight),e.primary,"Max Weight","lb"),h(c.map(e=>e.totalVolume),e.carbs,"Total Volume","")]}),(0,ce.jsxs)(j.default,{style:y.historySection,children:[(0,ce.jsx)(F.default,{style:y.sectionTitle,children:"Session History"}),(0,ce.jsx)(fe,{children:c.slice().reverse().map((e,t)=>(0,ce.jsxs)(j.default,{style:y.historyItem,children:[(0,ce.jsx)(F.default,{style:y.historyDate,children:new Date(e.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),(0,ce.jsx)(j.default,{style:y.historyStats,children:u?(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsxs)(j.default,{style:y.historyStat,children:[(0,ce.jsx)(F.default,{style:y.historyValue,children:e.totalSets}),(0,ce.jsx)(F.default,{style:y.historyLabel,children:"SETS"})]}),(0,ce.jsxs)(j.default,{style:y.historyStat,children:[(0,ce.jsx)(F.default,{style:y.historyValue,children:e.totalReps}),(0,ce.jsx)(F.default,{style:y.historyLabel,children:"REPS"})]}),(0,ce.jsxs)(j.default,{style:y.historyStat,children:[(0,ce.jsx)(F.default,{style:y.historyValue,children:e.avgReps}),(0,ce.jsx)(F.default,{style:y.historyLabel,children:"AVG/SET"})]})]}):(0,ce.jsxs)(ce.Fragment,{children:[(0,ce.jsxs)(j.default,{style:y.historyStat,children:[(0,ce.jsxs)(F.default,{style:y.historyValue,children:[e.maxWeight,"lb"]}),(0,ce.jsx)(F.default,{style:y.historyLabel,children:"MAX"})]}),(0,ce.jsxs)(j.default,{style:y.historyStat,children:[(0,ce.jsx)(F.default,{style:y.historyValue,children:e.avgReps}),(0,ce.jsx)(F.default,{style:y.historyLabel,children:"AVG REPS"})]}),(0,ce.jsxs)(j.default,{style:y.historyStat,children:[(0,ce.jsx)(F.default,{style:y.historyValue,children:e.totalVolume}),(0,ce.jsx)(F.default,{style:y.historyLabel,children:"VOLUME"})]})]})})]},t))})]})]})})}const _r=(0,w.createNativeStackNavigator)();function Pr(){const e=st();return(0,ce.jsxs)(_r.Navigator,{screenOptions:e,children:[(0,ce.jsx)(_r.Screen,{name:"Calendar",component:Dr,options:{headerTitle:"Progress"}}),(0,ce.jsx)(_r.Screen,{name:"ExerciseProgress",component:Rr,options:{headerTitle:"Exercise Progress"}})]})}function Ar({icon:e,label:t,value:r,onPress:o}){const{theme:n}=de();return(0,ce.jsxs)(he.default,{onPress:o,style:({pressed:e})=>[Lr.settingsRow,{backgroundColor:e?n.backgroundDefault:"transparent"}],children:[(0,ce.jsxs)(j.default,{style:Lr.settingsRowLeft,children:[(0,ce.jsx)(j.default,{style:[Lr.settingsIcon,{backgroundColor:n.backgroundDefault}],children:(0,ce.jsx)(C.default,{name:e,size:18,color:n.primary})}),(0,ce.jsx)(ge,{type:"body",children:t})]}),(0,ce.jsxs)(j.default,{style:Lr.settingsRowRight,children:[r?(0,ce.jsx)(ge,{type:"small",style:{color:n.textSecondary},children:r}):null,(0,ce.jsx)(C.default,{name:"chevron-right",size:18,color:n.textSecondary})]})]})}const zr={mercury:"zap",venus:"heart",earth:"globe",mars:"target",jupiter:"circle",saturn:"disc",uranus:"wind",neptune:"droplet"},Wr={mercury:"Mercury",venus:"Venus",earth:"Earth",mars:"Mars",jupiter:"Jupiter",saturn:"Saturn",uranus:"Uranus",neptune:"Neptune"};function Mr(){const e=(0,d.useSafeAreaInsets)(),t=(0,T.useHeaderHeight)(),r=(0,S.useBottomTabBarHeight)(),o=(0,s.useNavigation)(),{theme:a}=de(),l=Ye(),{user:i,updateProfile:c}=Ze(),u=i?.name||"User",g=i?.avatar||"earth",h=i?.units||"imperial",[y,x]=(0,n.useState)(!1),[m,p]=(0,n.useState)(u),f=["mercury","venus","earth","mars","jupiter","saturn","uranus","neptune"],b=()=>{p(u),x(!1)};return(0,ce.jsxs)(wt,{style:{flex:1,backgroundColor:a.backgroundRoot},contentContainerStyle:{paddingTop:t+L,paddingBottom:r+L,paddingHorizontal:M},scrollIndicatorInsets:{bottom:e.bottom},children:[(0,ce.jsxs)(j.default,{style:Lr.profileHeader,children:[(0,ce.jsx)(he.default,{onPress:async()=>{const e=(f.indexOf(g)+1)%f.length;await c({avatar:f[e]})},style:[Lr.avatar,{backgroundColor:a.primary}],children:(0,ce.jsx)(C.default,{name:zr[g],size:56,color:"#FFF"})}),(0,ce.jsxs)(he.default,{onPress:()=>{p(u),x(!0)},style:Lr.nameRow,children:[(0,ce.jsx)(ge,{type:"h2",style:Lr.name,children:u}),(0,ce.jsx)(C.default,{name:"edit-2",size:16,color:a.textSecondary})]}),(0,ce.jsx)(ge,{type:"small",style:{color:a.textSecondary,marginTop:A},children:Wr[g]}),(0,ce.jsx)(ge,{type:"small",style:{color:a.textSecondary,marginTop:A},children:"Tap avatar to change planet"})]}),(0,ce.jsx)(kr.default,{visible:y,transparent:!0,animationType:"fade",onRequestClose:b,children:(0,ce.jsx)(j.default,{style:Lr.modalOverlay,children:(0,ce.jsxs)(j.default,{style:[Lr.modalContent,{backgroundColor:a.backgroundDefault}],children:[(0,ce.jsx)(ge,{type:"h4",style:{marginBottom:M},children:"Edit Name"}),(0,ce.jsx)(bt.default,{value:m,onChangeText:p,placeholder:"Enter your name",placeholderTextColor:a.textSecondary,autoFocus:!0,style:[Lr.nameInput,{backgroundColor:a.backgroundSecondary,color:a.text}]}),(0,ce.jsxs)(j.default,{style:Lr.modalButtons,children:[(0,ce.jsx)(he.default,{onPress:b,style:[Lr.modalButton,{backgroundColor:a.backgroundSecondary}],children:(0,ce.jsx)(ge,{type:"body",children:"Cancel"})}),(0,ce.jsx)(he.default,{onPress:async()=>{m.trim()&&await c({name:m.trim()}),x(!1)},style:[Lr.modalButton,{backgroundColor:a.primary}],children:(0,ce.jsx)(ge,{type:"body",style:{color:"#FFF"},children:"Save"})})]})]})})}),(0,ce.jsxs)(fe,{style:Lr.section,children:[(0,ce.jsx)(ge,{type:"h4",style:Lr.sectionTitle,children:"Goals"}),(0,ce.jsx)(Ar,{icon:"target",label:"Daily Calories",value:`${l.profile.goals.dailyCalories} cal`,onPress:()=>o.navigate("Goals")}),(0,ce.jsx)(j.default,{style:[Lr.divider,{backgroundColor:a.border}]}),(0,ce.jsx)(Ar,{icon:"activity",label:"Weekly Workouts",value:`${l.profile.goals.weeklyWorkouts} days`,onPress:()=>o.navigate("Goals")}),(0,ce.jsx)(j.default,{style:[Lr.divider,{backgroundColor:a.border}]}),(0,ce.jsx)(Ar,{icon:"trending-down",label:"Target Weight",value:`${l.profile.goals.targetWeight} ${"imperial"===h?"lbs":"kg"}`,onPress:()=>o.navigate("Goals")})]}),(0,ce.jsxs)(fe,{style:Lr.section,children:[(0,ce.jsx)(ge,{type:"h4",style:Lr.sectionTitle,children:"Preferences"}),(0,ce.jsx)(Ar,{icon:"globe",label:"Units",value:"imperial"===h?"Imperial (lbs)":"Metric (kg)",onPress:async()=>{const e="metric"===h?"imperial":"metric";await c({units:e})}})]}),(0,ce.jsxs)(fe,{style:Lr.section,children:[(0,ce.jsx)(ge,{type:"h4",style:Lr.sectionTitle,children:"Data Management"}),(0,ce.jsx)(Ar,{icon:"save",label:"Backup & Restore",value:"",onPress:()=>o.navigate("Backup")})]}),(0,ce.jsxs)(fe,{style:Lr.section,children:[(0,ce.jsx)(ge,{type:"h4",style:Lr.sectionTitle,children:"Macros Goals"}),(0,ce.jsxs)(j.default,{style:Lr.macroRow,children:[(0,ce.jsxs)(j.default,{style:Lr.macroItem,children:[(0,ce.jsx)(j.default,{style:[Lr.macroDot,{backgroundColor:a.protein}]}),(0,ce.jsx)(ge,{type:"small",children:"Protein"}),(0,ce.jsxs)(ge,{type:"body",style:{fontWeight:"600"},children:[l.profile.goals.dailyProtein,"g"]})]}),(0,ce.jsxs)(j.default,{style:Lr.macroItem,children:[(0,ce.jsx)(j.default,{style:[Lr.macroDot,{backgroundColor:a.carbs}]}),(0,ce.jsx)(ge,{type:"small",children:"Carbs"}),(0,ce.jsxs)(ge,{type:"body",style:{fontWeight:"600"},children:[l.profile.goals.dailyCarbs,"g"]})]}),(0,ce.jsxs)(j.default,{style:Lr.macroItem,children:[(0,ce.jsx)(j.default,{style:[Lr.macroDot,{backgroundColor:a.fats}]}),(0,ce.jsx)(ge,{type:"small",children:"Fats"}),(0,ce.jsxs)(ge,{type:"body",style:{fontWeight:"600"},children:[l.profile.goals.dailyFats,"g"]})]})]})]})]})}const Lr=a.default.create({profileHeader:{alignItems:"center",marginBottom:O},avatar:{width:100,height:100,borderRadius:50,alignItems:"center",justifyContent:"center",marginBottom:W},name:{marginBottom:A},section:{marginBottom:M},sectionTitle:{marginBottom:W},settingsRow:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",paddingVertical:W,marginHorizontal:-M,paddingHorizontal:M},settingsRowLeft:{flexDirection:"row",alignItems:"center"},settingsIcon:{width:36,height:36,borderRadius:X,alignItems:"center",justifyContent:"center",marginRight:W},settingsRowRight:{flexDirection:"row",alignItems:"center",gap:z},divider:{height:1,marginLeft:52},macroRow:{flexDirection:"row",justifyContent:"space-around"},macroItem:{alignItems:"center",gap:A},macroDot:{width:8,height:8,borderRadius:4},nameRow:{flexDirection:"row",alignItems:"center",gap:z},modalOverlay:{flex:1,backgroundColor:"rgba(0, 0, 0, 0.5)",justifyContent:"center",alignItems:"center",padding:L},modalContent:{width:"100%",maxWidth:340,borderRadius:J,padding:L},nameInput:{height:48,borderRadius:Y,paddingHorizontal:M,fontSize:16,marginBottom:M},modalButtons:{flexDirection:"row",gap:W},modalButton:{flex:1,height:44,borderRadius:Y,alignItems:"center",justifyContent:"center"}});function Or(){const e=(0,d.useSafeAreaInsets)(),t=(0,T.useHeaderHeight)(),r=(0,S.useBottomTabBarHeight)(),o=(0,s.useNavigation)(),{theme:a}=de(),l=Ye(),[i,c]=(0,n.useState)({dailyCalories:String(l.profile.goals.dailyCalories),dailyProtein:String(l.profile.goals.dailyProtein),dailyCarbs:String(l.profile.goals.dailyCarbs),dailyFats:String(l.profile.goals.dailyFats),weeklyWorkouts:String(l.profile.goals.weeklyWorkouts),targetWeight:String(l.profile.goals.targetWeight)}),[u,g]=(0,n.useState)(""),h=(new Date).toISOString().split("T")[0],y=l.weightEntries.slice(-7).map(e=>({day:new Date(e.date).toLocaleDateString("en-US",{weekday:"short"}).slice(0,1),value:e.weight,completed:!0})),x=l.weightEntries[l.weightEntries.length-1],m=l.weightEntries[0],p=x&&m?(x.weight-m.weight).toFixed(1):0;return(0,ce.jsxs)(wt,{style:{flex:1,backgroundColor:a.backgroundRoot},contentContainerStyle:{paddingTop:t+L,paddingBottom:r+L,paddingHorizontal:M},scrollIndicatorInsets:{bottom:e.bottom},children:[(0,ce.jsxs)(fe,{style:Hr.section,children:[(0,ce.jsx)(ge,{type:"h4",style:Hr.sectionTitle,children:"Weight Tracking"}),(0,ce.jsxs)(j.default,{style:Hr.weightSummary,children:[(0,ce.jsxs)(j.default,{style:Hr.weightStat,children:[(0,ce.jsx)(ge,{type:"small",style:{color:a.textSecondary},children:"Current"}),(0,ce.jsx)(ge,{type:"h3",children:x?x.weight:"--"}),(0,ce.jsx)(ge,{type:"small",style:{color:a.textSecondary},children:"imperial"===l.profile.units?"lbs":"kg"})]}),(0,ce.jsxs)(j.default,{style:Hr.weightStat,children:[(0,ce.jsx)(ge,{type:"small",style:{color:a.textSecondary},children:"Target"}),(0,ce.jsx)(ge,{type:"h3",children:l.profile.goals.targetWeight}),(0,ce.jsx)(ge,{type:"small",style:{color:a.textSecondary},children:"imperial"===l.profile.units?"lbs":"kg"})]}),(0,ce.jsxs)(j.default,{style:Hr.weightStat,children:[(0,ce.jsx)(ge,{type:"small",style:{color:a.textSecondary},children:"Change"}),(0,ce.jsxs)(ge,{type:"h3",style:{color:Number(p)<0?a.success:a.error},children:[Number(p)>0?"+":"",p]}),(0,ce.jsx)(ge,{type:"small",style:{color:a.textSecondary},children:"imperial"===l.profile.units?"lbs":"kg"})]})]}),y.length>0?(0,ce.jsx)(De,{data:y,label:"Weight History",color:a.info}):null,(0,ce.jsxs)(j.default,{style:Hr.logWeightRow,children:[(0,ce.jsx)(bt.default,{value:u,onChangeText:g,placeholder:"Enter weight",placeholderTextColor:a.textSecondary,keyboardType:"decimal-pad",style:[Hr.weightInput,{backgroundColor:a.backgroundDefault,color:a.text}]}),(0,ce.jsx)(he.default,{onPress:()=>{u&&(l.addWeightEntry(parseFloat(u),h),g(""))},style:[Hr.logButton,{backgroundColor:u?a.primary:a.backgroundDefault}],children:(0,ce.jsx)(C.default,{name:"plus",size:20,color:u?"#FFF":a.textSecondary})})]})]}),(0,ce.jsxs)(fe,{style:Hr.section,children:[(0,ce.jsx)(ge,{type:"h4",style:Hr.sectionTitle,children:"Nutrition Goals"}),(0,ce.jsxs)(j.default,{style:Hr.goalRow,children:[(0,ce.jsxs)(j.default,{style:Hr.goalLabel,children:[(0,ce.jsx)(j.default,{style:[Hr.goalDot,{backgroundColor:a.primary}]}),(0,ce.jsx)(ge,{type:"body",children:"Daily Calories"})]}),(0,ce.jsx)(bt.default,{value:i.dailyCalories,onChangeText:e=>c(Object.assign({},i,{dailyCalories:e})),keyboardType:"number-pad",style:[Hr.goalInput,{backgroundColor:a.backgroundDefault,color:a.text}]})]}),(0,ce.jsxs)(j.default,{style:Hr.goalRow,children:[(0,ce.jsxs)(j.default,{style:Hr.goalLabel,children:[(0,ce.jsx)(j.default,{style:[Hr.goalDot,{backgroundColor:a.protein}]}),(0,ce.jsx)(ge,{type:"body",children:"Protein (g)"})]}),(0,ce.jsx)(bt.default,{value:i.dailyProtein,onChangeText:e=>c(Object.assign({},i,{dailyProtein:e})),keyboardType:"number-pad",style:[Hr.goalInput,{backgroundColor:a.backgroundDefault,color:a.text}]})]}),(0,ce.jsxs)(j.default,{style:Hr.goalRow,children:[(0,ce.jsxs)(j.default,{style:Hr.goalLabel,children:[(0,ce.jsx)(j.default,{style:[Hr.goalDot,{backgroundColor:a.carbs}]}),(0,ce.jsx)(ge,{type:"body",children:"Carbs (g)"})]}),(0,ce.jsx)(bt.default,{value:i.dailyCarbs,onChangeText:e=>c(Object.assign({},i,{dailyCarbs:e})),keyboardType:"number-pad",style:[Hr.goalInput,{backgroundColor:a.backgroundDefault,color:a.text}]})]}),(0,ce.jsxs)(j.default,{style:Hr.goalRow,children:[(0,ce.jsxs)(j.default,{style:Hr.goalLabel,children:[(0,ce.jsx)(j.default,{style:[Hr.goalDot,{backgroundColor:a.fats}]}),(0,ce.jsx)(ge,{type:"body",children:"Fats (g)"})]}),(0,ce.jsx)(bt.default,{value:i.dailyFats,onChangeText:e=>c(Object.assign({},i,{dailyFats:e})),keyboardType:"number-pad",style:[Hr.goalInput,{backgroundColor:a.backgroundDefault,color:a.text}]})]})]}),(0,ce.jsxs)(fe,{style:Hr.section,children:[(0,ce.jsx)(ge,{type:"h4",style:Hr.sectionTitle,children:"Fitness Goals"}),(0,ce.jsxs)(j.default,{style:Hr.goalRow,children:[(0,ce.jsxs)(j.default,{style:Hr.goalLabel,children:[(0,ce.jsx)(j.default,{style:[Hr.goalDot,{backgroundColor:a.success}]}),(0,ce.jsx)(ge,{type:"body",children:"Weekly Workouts"})]}),(0,ce.jsx)(bt.default,{value:i.weeklyWorkouts,onChangeText:e=>c(Object.assign({},i,{weeklyWorkouts:e})),keyboardType:"number-pad",style:[Hr.goalInput,{backgroundColor:a.backgroundDefault,color:a.text}]})]}),(0,ce.jsxs)(j.default,{style:Hr.goalRow,children:[(0,ce.jsxs)(j.default,{style:Hr.goalLabel,children:[(0,ce.jsx)(j.default,{style:[Hr.goalDot,{backgroundColor:a.info}]}),(0,ce.jsxs)(ge,{type:"body",children:["Target Weight (","imperial"===l.profile.units?"lbs":"kg",")"]})]}),(0,ce.jsx)(bt.default,{value:i.targetWeight,onChangeText:e=>c(Object.assign({},i,{targetWeight:e})),keyboardType:"decimal-pad",style:[Hr.goalInput,{backgroundColor:a.backgroundDefault,color:a.text}]})]})]}),(0,ce.jsx)(vt,{onPress:()=>{l.updateProfile({goals:{dailyCalories:parseInt(i.dailyCalories)||0,dailyProtein:parseInt(i.dailyProtein)||0,dailyCarbs:parseInt(i.dailyCarbs)||0,dailyFats:parseInt(i.dailyFats)||0,weeklyWorkouts:parseInt(i.weeklyWorkouts)||0,targetWeight:parseFloat(i.targetWeight)||0}}),o.goBack()},children:"Save Goals"})]})}const Hr=a.default.create({section:{marginBottom:M},sectionTitle:{marginBottom:M},weightSummary:{flexDirection:"row",justifyContent:"space-around",marginBottom:M},weightStat:{alignItems:"center"},logWeightRow:{flexDirection:"row",gap:z},weightInput:{flex:1,height:V,borderRadius:Y,paddingHorizontal:M,fontSize:16},logButton:{width:V,height:V,borderRadius:Y,alignItems:"center",justifyContent:"center"},goalRow:{flexDirection:"row",alignItems:"center",justifyContent:"space-between",marginBottom:W},goalLabel:{flexDirection:"row",alignItems:"center"},goalDot:{width:8,height:8,borderRadius:4,marginRight:z},goalInput:{width:80,height:40,borderRadius:X,textAlign:"center",fontSize:16}});var Nr=r(76);function Er(){const e=(0,d.useSafeAreaInsets)(),t=(0,T.useHeaderHeight)(),{theme:r}=de(),o=(0,u.useQueryClient)(),[a,s]=(0,n.useState)(!1),[l,i]=(0,n.useState)(!1),[c,g]=(0,n.useState)(null);return(0,ce.jsxs)(wt,{style:{flex:1,backgroundColor:r.backgroundRoot},contentContainerStyle:{paddingTop:t+L,paddingBottom:e.bottom+L,paddingHorizontal:M},scrollIndicatorInsets:{bottom:e.bottom},children:[(0,ce.jsxs)(fe,{style:Vr.section,children:[(0,ce.jsx)(j.default,{style:Vr.iconContainer,children:(0,ce.jsx)(j.default,{style:[Vr.iconCircle,{backgroundColor:r.primary+"20"}],children:(0,ce.jsx)(C.default,{name:"download-cloud",size:32,color:r.primary})})}),(0,ce.jsx)(ge,{type:"h3",style:Vr.sectionTitle,children:"Export Backup"}),(0,ce.jsx)(ge,{type:"body",style:[Vr.description,{color:r.textSecondary}],children:"Download all your fitness data including workouts, nutrition logs, weight entries, and goals as a backup file."}),(0,ce.jsx)(he.default,{onPress:async()=>{s(!0);try{const e=new URL("/api/backup/export",x()),t=await p("GET",e.toString()),r=await t.json();if(!r.success||!r.backup)throw new Error("Failed to export data");const o=JSON.stringify(r.backup,null,2),n=`novafit-backup-${(new Date).toISOString().split("T")[0]}.json`;{const e=new Blob([o],{type:"application/json"}),t=URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download=n,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t),g((new Date).toLocaleString()),Rt.default.alert("Success","Your backup has been downloaded.")}}catch(e){console.error("Export error:",e),Rt.default.alert("Export Failed","Could not export your data. Please try again.")}finally{s(!1)}},disabled:a,style:({pressed:e})=>[Vr.button,{backgroundColor:r.primary,opacity:e||a?.7:1}],children:(0,ce.jsxs)(j.default,{style:Vr.buttonContent,children:[a?(0,ce.jsx)(b.default,{size:"small",color:"#FFF"}):(0,ce.jsx)(C.default,{name:"download",size:18,color:"#FFF",style:Vr.buttonIcon}),(0,ce.jsx)(ge,{type:"body",style:{color:"#FFF",fontWeight:"600"},children:a?"Exporting...":"Export Data"})]})}),c?(0,ce.jsxs)(ge,{type:"small",style:[Vr.lastExport,{color:r.textSecondary}],children:["Last export: ",c]}):null]}),(0,ce.jsxs)(fe,{style:Vr.section,children:[(0,ce.jsx)(j.default,{style:Vr.iconContainer,children:(0,ce.jsx)(j.default,{style:[Vr.iconCircle,{backgroundColor:r.success+"20"}],children:(0,ce.jsx)(C.default,{name:"upload-cloud",size:32,color:r.success})})}),(0,ce.jsx)(ge,{type:"h3",style:Vr.sectionTitle,children:"Import Backup"}),(0,ce.jsx)(ge,{type:"body",style:[Vr.description,{color:r.textSecondary}],children:"Restore your data from a previously exported backup file. Your current data will be preserved and merged with the imported data."}),(0,ce.jsx)(he.default,{onPress:async()=>{try{const e=await Nr.getDocumentAsync({type:"application/json",copyToCacheDirectory:!0});if(e.canceled||!e.assets?.[0])return;const t=e.assets[0];Rt.default.alert("Import Backup","This will add the backup data to your account. Your existing data will be kept. Continue?",[{text:"Cancel",style:"cancel"},{text:"Import",onPress:async()=>{i(!0);try{let e;{const r=await fetch(t.uri);e=await r.text()}const r=JSON.parse(e);if(!r.version)throw new Error("Invalid backup file format");const n=new URL("/api/backup/import",x()),a=await p("POST",n.toString(),{backup:r,options:{mergeMode:"merge"}}),s=await a.json();if(!s.success)throw new Error(s.error||"Import failed");o.invalidateQueries();const l=s.imported;Rt.default.alert("Import Successful",`Imported:\n- ${l.workouts} workouts\n- ${l.workoutLogs} workout logs\n- ${l.foods} foods\n- ${l.foodEntries} food entries\n- ${l.weightEntries} weight entries\n- ${l.meals} meals`)}catch(e){console.error("Import error:",e),Rt.default.alert("Import Failed",e.message||"Could not import the backup file. Please check the file format.")}finally{i(!1)}}}])}catch(e){console.error("Document picker error:",e)}},disabled:l,style:({pressed:e})=>[Vr.button,{backgroundColor:r.backgroundSecondary,opacity:e||l?.7:1}],children:(0,ce.jsxs)(j.default,{style:Vr.buttonContent,children:[l?(0,ce.jsx)(b.default,{size:"small",color:r.primary}):(0,ce.jsx)(C.default,{name:"upload",size:18,color:r.primary,style:Vr.buttonIcon}),(0,ce.jsx)(ge,{type:"body",style:{color:r.primary,fontWeight:"600"},children:l?"Importing...":"Select Backup File"})]})})]}),(0,ce.jsxs)(fe,{style:Vr.infoSection,children:[(0,ce.jsx)(C.default,{name:"info",size:20,color:r.textSecondary}),(0,ce.jsxs)(j.default,{style:Vr.infoContent,children:[(0,ce.jsx)(ge,{type:"h4",style:{marginBottom:A},children:"About Backups"}),(0,ce.jsx)(ge,{type:"small",style:{color:r.textSecondary},children:"Backups include all your personal fitness data. Keep your backup files in a safe place. You can use them to restore your data on any device."})]})]})]})}const Vr=a.default.create({section:{marginBottom:M,alignItems:"center",paddingVertical:O},iconContainer:{marginBottom:M},iconCircle:{width:72,height:72,borderRadius:36,alignItems:"center",justifyContent:"center"},sectionTitle:{textAlign:"center",marginBottom:z},description:{textAlign:"center",marginBottom:M,paddingHorizontal:W},button:{minWidth:200,height:48,borderRadius:Y,alignItems:"center",justifyContent:"center",paddingHorizontal:L},buttonContent:{flexDirection:"row",alignItems:"center",gap:z},buttonIcon:{marginRight:A},lastExport:{marginTop:W},infoSection:{flexDirection:"row",alignItems:"flex-start",gap:W},infoContent:{flex:1}}),$r=(0,w.createNativeStackNavigator)();function Ur(){const e=st();return(0,ce.jsxs)($r.Navigator,{screenOptions:e,children:[(0,ce.jsx)($r.Screen,{name:"Profile",component:Mr,options:{headerTitle:"Profile"}}),(0,ce.jsx)($r.Screen,{name:"Goals",component:Or,options:{headerTitle:"Goals"}}),(0,ce.jsx)($r.Screen,{name:"Backup",component:Er,options:{headerTitle:"Backup & Restore"}})]})}const Gr=(0,S.createBottomTabNavigator)();function Xr(){const{theme:e,isDark:t}=de();return(0,ce.jsxs)(Gr.Navigator,{initialRouteName:"HomeTab",screenOptions:{tabBarActiveTintColor:e.tabIconSelected,tabBarInactiveTintColor:e.tabIconDefault,tabBarStyle:{position:"absolute",backgroundColor:void 0,borderTopWidth:0,elevation:0},tabBarBackground:()=>null,headerShown:!1},children:[(0,ce.jsx)(Gr.Screen,{name:"HomeTab",component:it,options:{title:"Home",tabBarIcon:({color:e,size:t})=>(0,ce.jsx)(C.default,{name:"home",size:t,color:e})}}),(0,ce.jsx)(Gr.Screen,{name:"WorkoutsTab",component:Et,options:{title:"Workouts",tabBarIcon:({color:e,size:t})=>(0,ce.jsx)(k.default,{name:"dumbbell",size:t,color:e})}}),(0,ce.jsx)(Gr.Screen,{name:"NutritionTab",component:Cr,options:{title:"Nutrition",tabBarIcon:({color:e,size:t})=>(0,ce.jsx)(k.default,{name:"apple",size:t,color:e})}}),(0,ce.jsx)(Gr.Screen,{name:"CalendarTab",component:Pr,options:{title:"Progress",tabBarIcon:({color:e,size:t})=>(0,ce.jsx)(C.default,{name:"calendar",size:t,color:e})}}),(0,ce.jsx)(Gr.Screen,{name:"ProfileTab",component:Ur,options:{title:"Profile",tabBarIcon:({color:e,size:t})=>(0,ce.jsx)(C.default,{name:"user",size:t,color:e})}})]})}var Yr=r(1043);const Jr={code:"function AuthScreenTsx1(){const{tabIndicatorPosition}=this.__closure;return{transform:[{translateX:tabIndicatorPosition.value*120}]};}"};function qr(){const{theme:e,isDark:t}=de(),o=(0,d.useSafeAreaInsets)(),{login:a,register:s}=Ze(),[l,i]=(0,n.useState)("login"),[c,u]=(0,n.useState)(""),[g,h]=(0,n.useState)(""),[y,x]=(0,n.useState)(""),[m,p]=(0,n.useState)(""),[f,w]=(0,n.useState)(!1),[S,k]=(0,n.useState)(!1),v=(0,ye.useSharedValue)(0),T=e=>{i(e),p(""),v.value=(0,ye.withSpring)("login"===e?0:1,{damping:15,stiffness:150})},I=(0,ye.useAnimatedStyle)(function({_worklet_1195947310797_init_data:e,tabIndicatorPosition:t}){const r=()=>({transform:[{translateX:120*t.value}]});return r.__closure={tabIndicatorPosition:t},r.__workletHash=1195947310797,r.__initData=e,r}({_worklet_1195947310797_init_data:Jr,tabIndicatorPosition:v}));return(0,ce.jsx)(Lt,{style:Qr.container,children:(0,ce.jsxs)(wt,{contentContainerStyle:[Qr.scrollContent,{paddingTop:o.top+L,paddingBottom:o.bottom+L}],showsVerticalScrollIndicator:!1,children:[(0,ce.jsxs)(j.default,{style:Qr.logoContainer,children:[(0,ce.jsx)(Yr.Image,{source:r(3229),style:Qr.logo,contentFit:"contain"}),(0,ce.jsx)(ge,{type:"h1",style:Qr.appName,children:"NovaFit"}),(0,ce.jsx)(ge,{type:"small",style:{color:e.textSecondary},children:"Track your fitness journey"})]}),(0,ce.jsxs)(ye.default.View,{entering:ye.FadeInUp.delay(200).springify(),style:[Qr.card,{backgroundColor:e.backgroundSecondary}],children:[(0,ce.jsxs)(j.default,{style:Qr.tabContainer,children:[(0,ce.jsx)(ye.default.View,{style:[Qr.tabIndicator,{backgroundColor:e.primary},I]}),(0,ce.jsx)(he.default,{style:Qr.tab,onPress:()=>T("login"),children:(0,ce.jsx)(ge,{type:"body",style:[Qr.tabText,"login"===l&&{color:e.buttonText,fontWeight:"600"}],children:"Sign In"})}),(0,ce.jsx)(he.default,{style:Qr.tab,onPress:()=>T("register"),children:(0,ce.jsx)(ge,{type:"body",style:[Qr.tabText,"register"===l&&{color:e.buttonText,fontWeight:"600"}],children:"Sign Up"})})]}),(0,ce.jsxs)(j.default,{style:Qr.form,children:["register"===l?(0,ce.jsxs)(j.default,{style:Qr.inputContainer,children:[(0,ce.jsx)(C.default,{name:"user",size:20,color:e.textSecondary,style:Qr.inputIcon}),(0,ce.jsx)(bt.default,{style:[Qr.input,{backgroundColor:e.backgroundTertiary,color:e.text,borderColor:e.border}],placeholder:"Your name",placeholderTextColor:e.textSecondary,value:y,onChangeText:x,autoCapitalize:"words",autoCorrect:!1})]}):null,(0,ce.jsxs)(j.default,{style:Qr.inputContainer,children:[(0,ce.jsx)(C.default,{name:"mail",size:20,color:e.textSecondary,style:Qr.inputIcon}),(0,ce.jsx)(bt.default,{style:[Qr.input,{backgroundColor:e.backgroundTertiary,color:e.text,borderColor:e.border}],placeholder:"Email address",placeholderTextColor:e.textSecondary,value:c,onChangeText:u,keyboardType:"email-address",autoCapitalize:"none",autoCorrect:!1})]}),(0,ce.jsxs)(j.default,{style:Qr.inputContainer,children:[(0,ce.jsx)(C.default,{name:"lock",size:20,color:e.textSecondary,style:Qr.inputIcon}),(0,ce.jsx)(bt.default,{style:[Qr.input,{backgroundColor:e.backgroundTertiary,color:e.text,borderColor:e.border,paddingRight:48}],placeholder:"Password",placeholderTextColor:e.textSecondary,value:g,onChangeText:h,secureTextEntry:!S,autoCapitalize:"none",autoCorrect:!1}),(0,ce.jsx)(he.default,{style:Qr.passwordToggle,onPress:()=>k(!S),children:(0,ce.jsx)(C.default,{name:S?"eye-off":"eye",size:20,color:e.textSecondary})})]}),m?(0,ce.jsxs)(ye.default.View,{entering:ye.FadeInUp.springify(),style:[Qr.errorContainer,{backgroundColor:e.error+"20"}],children:[(0,ce.jsx)(C.default,{name:"alert-circle",size:16,color:e.error}),(0,ce.jsx)(ge,{type:"small",style:{color:e.error,marginLeft:z},children:m})]}):null,(0,ce.jsx)(vt,{onPress:async()=>{if(p(""),c.trim())if(g.trim())if("register"!==l||y.trim())if(g.length<6)p("Password must be at least 6 characters");else{w(!0);try{const e="login"===l?await a(c.trim().toLowerCase(),g):await s(c.trim().toLowerCase(),g,y.trim());e.success||p(e.error||"Something went wrong")}catch(e){p("Connection error. Please try again.")}finally{w(!1)}}else p("Please enter your name");else p("Please enter your password");else p("Please enter your email")},disabled:f,style:Qr.submitButton,children:f?(0,ce.jsx)(b.default,{color:e.buttonText,size:"small"}):"login"===l?"Sign In":"Create Account"})]})]}),(0,ce.jsxs)(j.default,{style:Qr.footer,children:[(0,ce.jsx)(ge,{type:"small",style:{color:e.textSecondary},children:"login"===l?"Don't have an account? ":"Already have an account? "}),(0,ce.jsx)(he.default,{onPress:()=>T("login"===l?"register":"login"),children:(0,ce.jsx)(ge,{type:"small",style:{color:e.primary,fontWeight:"600"},children:"login"===l?"Sign Up":"Sign In"})})]})]})})}const Qr=a.default.create({container:{flex:1},scrollContent:{flexGrow:1,justifyContent:"center",paddingHorizontal:L},logoContainer:{alignItems:"center",marginBottom:H},logo:{width:100,height:100,marginBottom:M},appName:{marginBottom:A},card:{borderRadius:Q,padding:L},tabContainer:{flexDirection:"row",marginBottom:L,position:"relative"},tabIndicator:{position:"absolute",width:120,height:"100%",borderRadius:J},tab:{width:120,paddingVertical:W,alignItems:"center",zIndex:1},tabText:{fontWeight:"500"},form:{gap:M},inputContainer:{position:"relative"},inputIcon:{position:"absolute",left:M,top:14,zIndex:1},input:Object.assign({height:V,borderRadius:J,paddingHorizontal:M,paddingLeft:48},oe,{borderWidth:1}),passwordToggle:{position:"absolute",right:M,top:14},errorContainer:{flexDirection:"row",alignItems:"center",padding:W,borderRadius:Y},submitButton:{marginTop:z},footer:{flexDirection:"row",justifyContent:"center",marginTop:L}}),Kr=(0,w.createNativeStackNavigator)();function Zr(){const{theme:e}=de();return(0,ce.jsx)(j.default,{style:[to.loading,{backgroundColor:e.backgroundRoot}],children:(0,ce.jsx)(b.default,{size:"large",color:e.primary})})}function eo(){const e=st(),{isLoading:t,isAuthenticated:r}=Ze();return t?(0,ce.jsx)(Zr,{}):(0,ce.jsx)(Kr.Navigator,{screenOptions:e,children:r?(0,ce.jsx)(Kr.Screen,{name:"Main",component:Xr,options:{headerShown:!1}}):(0,ce.jsx)(Kr.Screen,{name:"Auth",component:qr,options:{headerShown:!1}})})}const to=a.default.create({loading:{flex:1,justifyContent:"center",alignItems:"center"}});var ro=r(1206);function oo({error:e,resetError:t}){const{theme:r}=de(),[o,a]=(0,n.useState)(!1);return(0,ce.jsxs)(Lt,{style:no.container,children:[null,(0,ce.jsxs)(j.default,{style:no.content,children:[(0,ce.jsx)(ge,{type:"h1",style:no.title,children:"Something went wrong"}),(0,ce.jsx)(ge,{type:"body",style:no.message,children:"Please reload the app to continue."}),(0,ce.jsx)(he.default,{onPress:async()=>{try{await(0,ro.reloadAppAsync)()}catch(e){console.error("Failed to restart app:",e),t()}},style:({pressed:e})=>[no.button,{backgroundColor:r.link,opacity:e?.9:1,transform:[{scale:e?.98:1}]}],children:(0,ce.jsx)(ge,{type:"body",style:[no.buttonText,{color:r.buttonText}],children:"Try Again"})})]}),null]})}const no=a.default.create({container:{flex:1,width:"100%",height:"100%",justifyContent:"center",alignItems:"center",padding:O},content:{alignItems:"center",justifyContent:"center",gap:M,width:"100%",maxWidth:600},title:{textAlign:"center",lineHeight:40},message:{textAlign:"center",opacity:.7,lineHeight:24},topButton:{position:"absolute",top:O+M,right:M,width:44,height:44,borderRadius:Y,flexDirection:"row",alignItems:"center",justifyContent:"center",zIndex:10},button:{paddingVertical:M,borderRadius:Y,paddingHorizontal:O,minWidth:200,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:3},buttonText:{fontWeight:"600",textAlign:"center",fontSize:16},modalOverlay:{flex:1,backgroundColor:"rgba(0, 0, 0, 0.5)",justifyContent:"flex-end"},modalContainer:{width:"100%",height:"90%",borderTopLeftRadius:J,borderTopRightRadius:J},modalHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:M,paddingTop:M,paddingBottom:W,borderBottomWidth:1,borderBottomColor:"rgba(128, 128, 128, 0.2)"},modalTitle:{fontWeight:"600"},closeButton:{padding:A},modalScrollView:{flex:1},modalScrollContent:{padding:M},errorContainer:{width:"100%",borderRadius:Y,overflow:"hidden",padding:M},errorText:{fontSize:12,lineHeight:18,width:"100%"}});class ao extends n.Component{state={error:null};static defaultProps={FallbackComponent:oo};static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e,t){"function"===typeof this.props.onError&&this.props.onError(e,t.componentStack)}resetError=()=>{this.setState({error:null})};render(){const{FallbackComponent:e}=this.props;return this.state.error&&e?(0,ce.jsx)(e,{error:this.state.error,resetError:this.resetError}):this.props.children}}const so=a.default.create({root:{flex:1}});(0,o.default)(function(){return(0,ce.jsx)(ao,{children:(0,ce.jsx)(u.QueryClientProvider,{client:f,children:(0,ce.jsx)(Ke,{children:(0,ce.jsx)(d.SafeAreaProvider,{children:(0,ce.jsx)(l.GestureHandlerRootView,{style:so.root,children:(0,ce.jsxs)(i.KeyboardProvider,{children:[(0,ce.jsx)(s.NavigationContainer,{children:(0,ce.jsx)(eo,{})}),(0,ce.jsx)(c.StatusBar,{style:"auto"})]})})})})})})})},3229:(e,t,r)=>{e.exports=r.p+"static/media/icon.6a0738acc9e3f1615f82.png"}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,r),a.exports}r.m=e,(()=>{var e=[];r.O=(t,o,n,a)=>{if(!o){var s=1/0;for(c=0;c<e.length;c++){for(var[o,n,a]=e[c],l=!0,i=0;i<o.length;i++)(!1&a||s>=a)&&Object.keys(r.O).every(e=>r.O[e](o[i]))?o.splice(i--,1):(l=!1,a<s&&(s=a));if(l){e.splice(c--,1);var d=n();void 0!==d&&(t=d)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[o,n,a]}})(),r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="/",(()=>{var e={792:0};r.O.j=t=>0===e[t];var t=(t,o)=>{var n,a,[s,l,i]=o,d=0;if(s.some(t=>0!==e[t])){for(n in l)r.o(l,n)&&(r.m[n]=l[n]);if(i)var c=i(r)}for(t&&t(o);d<s.length;d++)a=s[d],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(c)},o=self.webpackChunkweb=self.webpackChunkweb||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var o=r.O(void 0,[96],()=>r(2677));o=r.O(o)})();
//# sourceMappingURL=main.9c169536.js.map